(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{177:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(12),o=a(0),u=a.n(o),i=a(59),l=a.n(i),s=a(4),m=a(6),f=a(27),d=function(e){var t=e.children,a=e.onClick,n=Object(f.a)(e,["children","onClick"]);return u.a.createElement("a",Object.assign({onClick:function(){return a&&a.apply(void 0,arguments)},className:"Button",href:"javascript: void(0)"},n),t)},h=a(21),p=a(3),b=function(e){Object(o.useEffect)((function(){document.title=e}),[e])},v=a(1),E=a.n(v);function j(){var e=Object(s.a)(["hexie.custom-dict"]);return j=function(){return e},e}function O(){var e=Object(s.a)(["hexie.copied"]);return O=function(){return e},e}function w(){var e=Object(s.a)(["hexie.decode"]);return w=function(){return e},e}function g(){var e=Object(s.a)(["hexie.encode"]);return g=function(){return e},e}function k(){var e=Object(s.a)(["hexie-encoder"]);return k=function(){return e},e}function x(){var e=Object(s.a)(["hexie-encoder"]);return x=function(){return e},e}var N=function(e){var t,a=e.location;b(E()(x()));var n=Object(o.useState)(""),r=Object(m.a)(n,2),c=r[0],i=r[1],l=Object(o.useState)(""),s=Object(m.a)(l,2),f=s[0],v=s[1],N=Object(o.useState)(""),y=Object(m.a)(N,2),C=y[0],S=y[1],R=Object(o.useState)(!1),_=Object(m.a)(R,2),M=_[0],D=_[1],I=Object(p.f)(),T=Object(o.useRef)(null),P=Object(o.useRef)(null),U=new URLSearchParams(null!==(t=null===a||void 0===a?void 0:a.search)&&void 0!==t?t:""),z=U.get("act")||"decode",F=decodeURI(U.get("dict")||""),H=decodeURI(U.get("txt")||""),B=Object(o.useMemo)((function(){var e=f||F;if(e)return e.split(/[,\uff0c]/).map((function(e){return e.trim()}))}),[f,F]),A=Object(o.useCallback)((function(){I.replace(a.pathname+"?act=encode"+(f?"&dict=".concat(encodeURI(f)):"")+(c?"&txt=".concat(encodeURI(c)):""))}),[c,f,I,a]),L=Object(o.useCallback)((function(){I.replace(a.pathname+"?act=decode"+(f?"&dict=".concat(encodeURI(f)):"")+(c?"&txt=".concat(encodeURI(c)):""))}),[c,f,I,a]),J=Object(o.useCallback)((function(e,t){try{var a=t&&t.length>2?Object(h.encode)(e,t):Object(h.encode)(e);S(a)}catch(n){S("")}}),[S]),W=Object(o.useCallback)((function(e,t){try{var a=t&&t.length>2?Object(h.decode)(e,t):Object(h.decode)(e);S(a)}catch(n){S("")}}),[S]);Object(o.useEffect)((function(){H&&i(H),F&&v(F),z&&("decode"===z?W(H,B):J(H,B))}),[z,H,F]);var Y=Object(o.useCallback)((function(){T.current.select(),T.current.setSelectionRange(0,999999),document.execCommand("copy"),D(!0),setTimeout((function(){return D(!1)}),700)}),[C,T]),$=Object(o.useCallback)((function(){P.current.select(),P.current.setSelectionRange(0,999999)}),[P]);return u.a.createElement("div",{className:"HexieEncoder"},u.a.createElement("h1",null,E()(k())),u.a.createElement("textarea",{onChange:function(e){var t=e.target.value;S(""),i(t)},value:c,ref:P,onFocus:$}),u.a.createElement("div",{className:"button-area"},u.a.createElement(d,{onClick:A},E()(g())),u.a.createElement(d,{onClick:L},E()(w()))),u.a.createElement("textarea",{value:M?E()(O()):C,readOnly:!0,onClick:Y,ref:T}),u.a.createElement("h2",null,E()(j())),u.a.createElement("input",{type:"text",placeholder:"\u5bcc\u5f3a,\u6c11\u4e3b,\u6587\u660e,\u548c\u8c10,\u81ea\u7531,\u5e73\u7b49,\u516c\u6b63,\u6cd5\u6cbb,\u7231\u56fd,\u656c\u4e1a,\u8bda\u4fe1,\u53cb\u5584",onChange:function(e){var t=e.target.value;S(""),v(t)},value:f}))},y=a(14);function C(){var e=Object(s.a)(["wip"]);return C=function(){return e},e}var S=function(e){return b("wheatup"),u.a.createElement("div",{className:"Home"},u.a.createElement("h2",null,E()(C())))},R=a(26),_=a.n(R),M=_.a.create({baseURL:"https://api.github.com/repos/wheatup/forum-threads"}),D=!1,I=function(){if(!D){var e=window.localStorage.getItem("token");e&&(M.defaults.headers.common.Authorization="Bearer "+e,D=!0)}return M},T=function(){var e;return(e=I()).get.apply(e,arguments)},P=function(){var e;return(e=I()).post.apply(e,arguments)},U=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/issues");case 2:if(!(t=e.sent)||!t.data){e.next=7;break}return e.abrupt("return",t.data);case 7:throw new Error(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/issues/".concat(t));case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("/issues/".concat(t,"/comments"));case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/issues",{title:t,body:a},{headers:{"Content-Type":"application/json",Accept:"application/vnd.github.v3+json"}});case 2:if(!(n=e.sent)||!n.data){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error(n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/issues/".concat(t,"/comments"),{body:a},{headers:{"Content-Type":"application/json",Accept:"application/vnd.github.v3+json"}});case 2:if(!(n=e.sent)||!n.data){e.next=7;break}return e.abrupt("return",n.data);case 7:throw new Error(n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=a(17),L=a.n(A),J=a(15),W=a.n(J),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;"string"===typeof e&&(e=new Date(e)),"string"===typeof t&&(t=new Date(t));var a=Math.abs(t.getTime()-e.getTime()),n=t.getTime()-e.getTime()>0;return a<1e3?"\u521a\u521a":a<6e4?Math.floor(a/1e3)+"\u79d2".concat(n?"\u524d":"\u540e"):a<36e5?Math.floor(a/6e4)+"\u5206\u949f".concat(n?"\u524d":"\u540e"):a<864e5?Math.floor(a/36e5)+"\u5c0f\u65f6".concat(n?"\u524d":"\u540e"):a<6048e5?Math.floor(a/864e5)+"\u5929".concat(n?"\u524d":"\u540e"):a<2592e6?Math.floor(a/6048e5)+"\u5468".concat(n?"\u524d":"\u540e"):a<94608e7?Math.floor(a/2592e6)+"\u4e2a\u6708".concat(n?"\u524d":"\u540e"):Math.floor(a/31536e6)+"\u5e74".concat(n?"\u524d":"\u540e")},$=function(e){var t=e.user,a=Object(o.useCallback)((function(e){window.open(t.html_url),e.stopPropagation(),e.preventDefault()}),[]);return u.a.createElement("div",{onClick:a,className:"UserAvatar"},t?u.a.createElement(u.a.Fragment,null,u.a.createElement("img",{src:t.avatar_url,alt:t.login}),u.a.createElement("h2",null,t.login)):u.a.createElement("i",{className:"icon-user"}))},q=function(e){var t=e.post,a=t.title,n=t.user,r=t.created_at,c=t.comments,o=(t.updated_at,t.number);return u.a.createElement(y.b,{to:"/forum/post/".concat(o),className:"PostEntry"},u.a.createElement($,{user:n}),u.a.createElement("div",{className:"summary"},u.a.createElement("h2",null,a),u.a.createElement("time",{className:"create"},Y(r))),u.a.createElement("span",{className:"details"},u.a.createElement("span",{className:"comments"},c)))},G=a(11),K=a(28),Q=Symbol(),V=Symbol(),X=Symbol(),Z=function(){var e;return Object(G.init)((e={},Object(K.a)(e,Q,""),Object(K.a)(e,V,null),Object(K.a)(e,X,window.localStorage.getItem("lang")||"zh-CN"),e))},ee=function(e){var t=e.children,a=Object(f.a)(e,["children"]);return u.a.createElement("a",Object.assign({className:"Button",href:"javascript: void(0)"},a),t)},te=function(e){var t=e.hasBody,a=e.onPost,n=Object(G.useData)(V),r=Object(o.useState)(""),c=Object(m.a)(r,2),i=c[0],l=c[1],s=Object(o.useState)(""),f=Object(m.a)(s,2),d=f[0],h=f[1],p=Object(o.useCallback)((function(){a&&(a(i,d),l(""),h(""))}),[i,d,a]);return u.a.createElement("div",{className:"ChatInput".concat(n?"":" locked")},u.a.createElement("div",{className:"title-area"},u.a.createElement(ee,null,u.a.createElement("i",{className:"icon-grin"})),u.a.createElement(ee,null,u.a.createElement("i",{className:"icon-images"})),t?u.a.createElement("input",{type:"text",value:i,onChange:function(e){return l(e.target.value)}}):u.a.createElement("textarea",{rows:"1",value:i,onChange:function(e){return l(e.target.value)}}),u.a.createElement(ee,{onClick:p},u.a.createElement("i",{className:"icon-paper-plane"}))),t&&u.a.createElement("div",{className:"body-area"},u.a.createElement("textarea",{rows:"4",value:d,onChange:function(e){return h(e.target.value)}})))},ae=function(e){var t=function(){var e=Object(o.useState)([]),t=Object(m.a)(e,2),a=t[0],n=t[1],r=Object(o.useCallback)((function(){U().then((function(e){n(e)}))}),[n]);return Object(o.useEffect)((function(){r()}),[]),[a,r]}(),a=Object(m.a)(t,2),n=a[0],r=a[1],c=Object(o.useCallback)((function(e,t){e?H(e,t).then((function(e){W.a.emit("REFRESH_POSTS")})).catch((function(e){L()("\u53d1\u5e03\u5931\u8d25","\u4e3b\u9898\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01","error"),console.error(e)})):L()("\u9519\u8bef","\u8bf7\u8f93\u5165\u6807\u9898\uff01","error")}),[]);return Object(o.useEffect)((function(){return W.a.on("REFRESH_POSTS",r),function(){return W.a.off("REFRESH_POSTS",r)}}),[]),u.a.createElement("div",{className:"PostList"},u.a.createElement("div",{className:"list-wrapper"},u.a.createElement("div",{className:"list"},n&&n.map((function(e){return u.a.createElement(q,{key:e.node_id,post:e})})))),u.a.createElement(te,{hasBody:!0,onPost:c}))},ne=a(61),re=a.n(ne),ce=function(e){var t=Object.assign({},e);return u.a.createElement("div",{className:"Markdown"},u.a.createElement(re.a,t))},oe=function(e){var t=e.post,a=t||{},n=a.user,r=a.title,c=a.body,o=a.created_at;return u.a.createElement("div",{className:"PostBody"},t&&u.a.createElement("div",{className:"wrapper"},u.a.createElement("div",{className:"title-area"},u.a.createElement($,{user:n}),u.a.createElement("div",{className:"info-area"},u.a.createElement("h2",null,r),u.a.createElement("time",{title:new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})},Y(o)))),u.a.createElement("div",{className:"body-area"},u.a.createElement(ce,{source:c}))))},ue=function(e){var t=e.comment,a=e.isMe,n=t.body,r=t.user;return u.a.createElement("div",{className:"Comment".concat(a?" me":"")},u.a.createElement($,{user:r}),u.a.createElement("div",{className:"content"},u.a.createElement(ce,{source:n})))},ie=function(e){var t=e.comments,a=0,n=Object(G.useData)(V),r=Object(o.useCallback)((function(e){return n&&n.id===e.id}));return u.a.createElement("div",{className:"Comments"},t.map((function(e){return u.a.createElement("div",{key:e.id.toString(),className:"comment-wrapper"},function(e){if(e-a>6e4)return a=e,!0}(new Date(e.created_at).getTime())&&u.a.createElement("time",{className:r(e.user)?"me":"",title:new Date(e.created_at).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})},Y(e.created_at)),u.a.createElement(ue,{comment:e,isMe:r(e.user)}))})))},le=function(e){var t=Object(p.g)().id,a=function(e){var t=Object(o.useState)(null),a=Object(m.a)(t,2),n=a[0],r=a[1],c=Object(o.useState)([]),u=Object(m.a)(c,2),i=u[0],l=u[1],s=Object(o.useCallback)((function(){e&&z(e).then((function(e){r(e)}))}),[e,r]),f=Object(o.useCallback)((function(){e&&F(e).then((function(e){l(e)}))}),[e,l]);return Object(o.useEffect)((function(){s(),f()}),[e]),[n,i,s,f]}(t),n=Object(m.a)(a,4),r=n[0],c=n[1],i=(n[2],n[3]),l=function(e){return Object(o.useCallback)((function(t){t&&t.trim()?B(e,t).then((function(e){W.a.emit("REFRESH_COMMENTS")})).catch((function(e){L()("\u53d1\u5e03\u5931\u8d25","\u4e3b\u9898\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01","error"),console.error(e)})):L()("\u9519\u8bef","\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9\uff01","error")}),[e])}(t);return Object(o.useEffect)((function(){return W.a.on("REFRESH_COMMENTS",i),function(){return W.a.off("COMMENTS",i)}}),[]),u.a.createElement("div",{className:"Post"},u.a.createElement("div",{className:"post-area"},u.a.createElement("div",{className:"post-wrapper"},u.a.createElement(oe,{post:r}),u.a.createElement(ie,{comments:c}))),u.a.createElement(te,{onPost:l}))},se=function(e){return u.a.createElement("div",{className:"Forum"},u.a.createElement(p.c,null,u.a.createElement(p.a,{path:"/forum/post/:id",component:le}),u.a.createElement(p.a,{path:"/forum/",component:ae,exact:!0})))},me=_.a.create(),fe={http:me,get:me.get,post:me.post,put:me.put,del:me.delete};function de(){var e=Object(s.a)(["auth.auth-expired-detail"]);return de=function(){return e},e}function he(){var e=Object(s.a)(["auth.auth-failed"]);return he=function(){return e},e}function pe(){var e=Object(s.a)(["auth.auth-failed-detail"]);return pe=function(){return e},e}function be(){var e=Object(s.a)(["auth.auth-failed"]);return be=function(){return e},e}var ve=function(e){var t=function(){var e=Object(G.useData)(V),t=Object(o.useCallback)((function(){window.location.href="https://github.com/login/oauth/authorize?client_id=".concat("9a7b4e01285d97e29469","&scope=repo")}),[]);return Object(o.useEffect)((function(){var t=/code=(\w+)/[Symbol.match](window.location.href);if(t&&t[1])fe.post("https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token",{client_id:"9a7b4e01285d97e29469",client_secret:"340d6e3e650e8d915562cab6eb1ae2b295abc7c9",code:t[1]}).then((function(e){if(e.data){var t=/access_token=(\w+)/[Symbol.match](e.data);t&&t[1]&&(window.localStorage.setItem("token",t[1]),window.location.href=window.location.href.replace(/[&?]code=\w+/,""))}})).catch((function(e){L()(E()(be()),E()(pe()),"error"),console.error(e)}));else if(!e){var a=window.localStorage.getItem("token");a&&fe.get("https://api.github.com/user",{headers:{Authorization:"token "+a}}).then((function(e){e&&e.data&&Object(G.setData)(V,e.data)})).catch((function(e){L()(E()(he()),E()(de()),"error"),console.error(e),window.localStorage.removeItem("token")}))}}),[window.location.href,e]),[e,t]}(),a=Object(m.a)(t,2),n=a[0],r=a[1],c=Object(o.useCallback)((function(){window.open(n.html_url)}),[n]);return u.a.createElement("a",{className:"User".concat(n?" login":""),href:"javascript: void(0)",onClick:n?c:r},n?u.a.createElement("img",{src:n.avatar_url,alt:n.login,title:n.login}):u.a.createElement("i",{className:"icon-user"}))};function Ee(){var e=Object(s.a)(["switch-language"]);return Ee=function(){return e},e}function je(){var e=Object(s.a)(["switch-language"]);return je=function(){return e},e}var Oe=function(e){var t=Object(G.useData)(X),a=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="en-US"===t?"zh-CN":"en-US",Object(G.setData)(X,a),e.next=4,Object(v.init)(a,function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/i18n/".concat(t,".json"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)}))),[t]);return u.a.createElement("a",{className:"LanguageSwitcher",href:"javascript: void(0)",title:E()(je()),onClick:a},u.a.createElement("img",{src:"/images/i18n/".concat(t,".svg"),alt:E()(Ee())}))};function we(){var e=Object(s.a)(["hexie-encoder"]);return we=function(){return e},e}function ge(){var e=Object(s.a)(["forum"]);return ge=function(){return e},e}function ke(){var e=Object(s.a)(["home"]);return ke=function(){return e},e}var xe=function(){return function(){var e=Object(o.useCallback)((function(){document.body.style.maxHeight=window.innerHeight+"px"}),[]);Object(o.useEffect)((function(){window.addEventListener("resize",e),e()}),[e])}(),u.a.createElement(y.a,null,u.a.createElement("div",{className:"App"},u.a.createElement("nav",null,u.a.createElement(y.c,{exact:!0,to:"/",className:"logo"}),u.a.createElement(y.c,{exact:!0,to:"/"},E()(ke())),u.a.createElement(y.c,{to:"/forum"},E()(ge())),u.a.createElement(y.c,{to:"/hexie"},E()(we())),u.a.createElement(Oe,null),u.a.createElement(ve,null)),u.a.createElement("main",null,u.a.createElement(p.c,null,u.a.createElement(p.a,{path:"/hexie",component:N}),u.a.createElement(p.a,{path:"/forum",component:se}),u.a.createElement(p.a,{path:"/",component:S,exact:!0}))),u.a.createElement("footer",null,"\xa9\xa0",u.a.createElement("a",{href:"https://github.com/wheatup/",target:"_blank",rel:"noopener noreferrer"},"wheatup"),"\xa0@",(new Date).getFullYear()," All rights reserved.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(177);Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(),e.next=3,Object(v.init)(window.localStorage.getItem("lang")||"zh-CN",function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/i18n/".concat(t,".json"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:l.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}));case 5:case"end":return e.stop()}}),e)})))()},62:function(e,t,a){e.exports=a(178)}},[[62,1,2]]]);
//# sourceMappingURL=main.19c7a904.chunk.js.map