(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{39:function(e,t,a){e.exports=a(76)},70:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(34),o=a.n(r),l=a(3),u=a(38),i=function(e){var t=e.children,a=e.onClick,n=Object(u.a)(e,["children","onClick"]);return c.a.createElement("a",Object.assign({onClick:function(){return a&&a.apply(void 0,arguments)},className:"Button",href:"javascript: void(0)"},n),t)},s=a(12),m=a(1),f=function(e){Object(n.useEffect)((function(){document.title=e}),[e])},d=function(e){var t,a=e.location;f("\u548c\u8c10\u52a0\u5bc6\u5668");var r=Object(n.useState)(""),o=Object(l.a)(r,2),u=o[0],d=o[1],h=Object(n.useState)(""),p=Object(l.a)(h,2),b=p[0],v=p[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),w=g[0],j=g[1],O=Object(n.useState)(!1),k=Object(l.a)(O,2),x=k[0],y=k[1],C=Object(m.f)(),N=Object(n.useRef)(null),S=Object(n.useRef)(null),_=new URLSearchParams(null!==(t=null===a||void 0===a?void 0:a.search)&&void 0!==t?t:""),R=_.get("act")||"decode",I=decodeURI(_.get("dict")||""),M=decodeURI(_.get("txt")||""),U=Object(n.useMemo)((function(){var e=b||I;if(e)return e.split(/[,\uff0c]/).map((function(e){return e.trim()}))}),[b,I]),P=Object(n.useCallback)((function(){C.replace(a.pathname+"?act=encode"+(b?"&dict=".concat(encodeURI(b)):"")+(u?"&txt=".concat(encodeURI(u)):""))}),[u,b,C,a]),D=Object(n.useCallback)((function(){C.replace(a.pathname+"?act=decode"+(b?"&dict=".concat(encodeURI(b)):"")+(u?"&txt=".concat(encodeURI(u)):""))}),[u,b,C,a]),T=Object(n.useCallback)((function(e,t){try{var a=t&&t.length>2?Object(s.encode)(e,t):Object(s.encode)(e);j(a)}catch(n){j("")}}),[j]),z=Object(n.useCallback)((function(e,t){try{var a=t&&t.length>2?Object(s.decode)(e,t):Object(s.decode)(e);j(a)}catch(n){j("")}}),[j]);Object(n.useEffect)((function(){M&&d(M),I&&v(I),R&&("decode"===R?z(M,U):T(M,U))}),[R,M,I]);var A=Object(n.useCallback)((function(){N.current.select(),N.current.setSelectionRange(0,999999),document.execCommand("copy"),y(!0),setTimeout((function(){return y(!1)}),700)}),[w,N]),B=Object(n.useCallback)((function(){S.current.select(),S.current.setSelectionRange(0,999999)}),[S]);return c.a.createElement("div",{className:"HexieEncoder"},c.a.createElement("h1",null,"\u548c\u8c10\u52a0\u5bc6\u5668"),c.a.createElement("textarea",{onChange:function(e){var t=e.target.value;j(""),d(t)},value:u,ref:S,onFocus:B}),c.a.createElement("div",{className:"button-area"},c.a.createElement(i,{onClick:P},"\u52a0\u5bc6"),c.a.createElement(i,{onClick:D},"\u89e3\u5bc6")),c.a.createElement("textarea",{value:x?"\u5df2\u590d\u5236":w,readOnly:!0,onClick:A,ref:N}),c.a.createElement("h2",null,"\u81ea\u5b9a\u4e49\u5b57\u5178"),c.a.createElement("input",{type:"text",placeholder:"\u5bcc\u5f3a,\u6c11\u4e3b,\u6587\u660e,\u548c\u8c10,\u81ea\u7531,\u5e73\u7b49,\u516c\u6b63,\u6cd5\u6cbb,\u7231\u56fd,\u656c\u4e1a,\u8bda\u4fe1,\u53cb\u5584",onChange:function(e){var t=e.target.value;j(""),v(t)},value:b}))},h=a(8),p=function(e){return f("wheatup"),c.a.createElement("div",{className:"Home"},c.a.createElement("h2",null,"\u65bd\u5de5\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u6765"))},b=a(9),v=a.n(b),E=a(14),g=a(13),w=a.n(g),j=w.a.create({baseURL:"https://api.github.com/repos/wheatup/wheatup.github.io"}),O=!1,k=function(){if(!O){var e=window.localStorage.getItem("token");e&&(j.defaults.headers.common.Authorization="token "+e,O=!0)}return j},x=function(){var e;return(e=k()).get.apply(e,arguments)},y=function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/issues?labels=forum");case 2:if(!(t=e.sent)||200!==t.status||!t.data){e.next=7;break}return e.abrupt("return",t.data);case 7:throw new Error(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/issues/".concat(t));case 2:if(!(a=e.sent)||200!==a.status||!a.data){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/issues/".concat(t,"/comments"));case 2:if(!(a=e.sent)||200!==a.status||!a.data){e.next=7;break}return e.abrupt("return",a.data);case 7:throw new Error(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;"string"===typeof e&&(e=new Date(e)),"string"===typeof t&&(t=new Date(t));var a=Math.abs(t.getTime()-e.getTime()),n=t.getTime()-e.getTime()>0;return a<1e3?"\u521a\u521a":a<6e4?Math.floor(a/1e3)+"\u79d2".concat(n?"\u524d":"\u540e"):a<36e5?Math.floor(a/6e4)+"\u5206\u949f".concat(n?"\u524d":"\u540e"):a<864e5?Math.floor(a/36e5)+"\u5c0f\u65f6".concat(n?"\u524d":"\u540e"):a<6048e5?Math.floor(a/864e5)+"\u5929".concat(n?"\u524d":"\u540e"):a<2592e6?Math.floor(a/6048e5)+"\u5468".concat(n?"\u524d":"\u540e"):a<94608e7?Math.floor(a/2592e6)+"\u4e2a\u6708".concat(n?"\u524d":"\u540e"):Math.floor(a/31536e6)+"\u5e74".concat(n?"\u524d":"\u540e")},_=function(e){var t=e.post;console.log(t);var a=t.title,r=t.user,o=t.created_at,l=t.comments,u=(t.updated_at,t.number),i=Object(n.useCallback)((function(e){window.open(r.html_url),e.stopPropagation(),e.preventDefault()}),[]);return c.a.createElement(h.b,{to:"/forum/post/".concat(u),className:"PostEntry"},c.a.createElement("div",{onClick:i,className:"avatar"},c.a.createElement("img",{src:r.avatar_url,alt:r.login}),c.a.createElement("h2",null,r.login)),c.a.createElement("div",{className:"summary"},c.a.createElement("h2",null,a),c.a.createElement("time",{className:"create"},S(o))),c.a.createElement("span",{className:"details"},c.a.createElement("span",{className:"comments"},l)))},R=function(e){var t=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){y().then((function(e){c(e)}))}),[]),a}();return c.a.createElement("div",{className:"PostList"},t&&t.map((function(e){return c.a.createElement(_,{key:e.node_id,post:e})})))},I=function(e){e.post;return c.a.createElement("div",{className:"PostBody"})},M=function(e){e.comments;return c.a.createElement("div",{className:"Comments"})},U=function(e){var t=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)([]),u=Object(l.a)(o,2),i=u[0],s=u[1];return Object(n.useEffect)((function(){e&&C(e).then((function(e){r(e)})),e&&N(e).then((function(e){s(e)}))}),[e]),[c,i]}(Object(m.g)().id),a=Object(l.a)(t,2),r=a[0],o=a[1];return console.log(r,o),c.a.createElement("div",{className:"Post"},c.a.createElement(I,{post:r}),c.a.createElement(M,{comments:o}))},P=function(e){return c.a.createElement("div",{className:"Forum"},c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/forum/post/:id",component:U}),c.a.createElement(m.a,{path:"/forum/",component:R,exact:!0})))},D=w.a.create(),T={http:D,get:D.get,post:D.post,put:D.put,del:D.delete},z=a(19),A=a.n(z),B=function(e){var t=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useCallback)((function(){window.location.href="https://github.com/login/oauth/authorize?client_id=9a7b4e01285d97e29469"}),[]);return Object(n.useEffect)((function(){var e=/code=(\w+)/[Symbol.match](window.location.href);if(e&&e[1])T.post("https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token",{client_id:"9a7b4e01285d97e29469",client_secret:"340d6e3e650e8d915562cab6eb1ae2b295abc7c9",code:e[1]}).then((function(e){if(e.data){var t=/access_token=(\w+)/[Symbol.match](e.data);t&&t[1]&&(window.localStorage.setItem("token",t[1]),window.location.href=window.location.href.replace(/[&?]code=\w+/,""))}console.log(e)})).catch((function(e){A()("\u6388\u6743\u5931\u8d25","\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01","error"),console.error(e)}));else if(!a){var t=window.localStorage.getItem("token");t&&T.get("https://api.github.com/user",{headers:{Authorization:"token "+t}}).then((function(e){e&&e.data&&c(e.data)})).catch((function(e){A()("\u6388\u6743\u5931\u8d25","\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01","error"),console.error(e),window.localStorage.removeItem("token")}))}}),[window.location.href,a]),[a,r]}(),a=Object(l.a)(t,2),r=a[0],o=a[1],u=Object(n.useCallback)((function(){console.log(r),window.open(r.html_url)}),[r]);return c.a.createElement("a",{className:"User".concat(r?" login":""),href:"javascript: void(0)",onClick:r?u:o},r?c.a.createElement("img",{src:r.avatar_url,alt:r.login,title:r.login}):c.a.createElement("i",{className:"icon-user"}))},H=function(){return function(){var e=Object(n.useCallback)((function(){document.body.style.maxHeight=window.innerHeight+"px"}),[]);Object(n.useEffect)((function(){window.addEventListener("resize",e),e()}),[e])}(),c.a.createElement(h.a,null,c.a.createElement("div",{className:"App"},c.a.createElement("nav",null,c.a.createElement(h.c,{exact:!0,to:"/",className:"logo"}),c.a.createElement(h.c,{exact:!0,to:"/"},"\u9996\u9875"),c.a.createElement(h.c,{to:"/forum"},"\u7559\u8a00\u677f"),c.a.createElement(h.c,{to:"/hexie"},"\u548c\u8c10\u52a0\u5bc6\u5668"),c.a.createElement(B,null)),c.a.createElement("main",null,c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/hexie",component:d}),c.a.createElement(m.a,{path:"/forum",component:P}),c.a.createElement(m.a,{path:"/",component:p,exact:!0}))),c.a.createElement("footer",null,"\xa9\xa0",c.a.createElement("a",{href:"https://github.com/wheatup/",target:"_blank",rel:"noopener noreferrer"},"wheatup"),"\xa0@",(new Date).getFullYear()," All rights reserved.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);var L=a(36),F=a(37),J=Symbol();Object(F.init)(Object(L.a)({},J,"1.0")),o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.9e857bd7.chunk.js.map