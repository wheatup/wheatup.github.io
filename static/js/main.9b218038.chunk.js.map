{"version":3,"sources":["hooks/misc.js","projects/home/Home.jsx","projects/forum/utils/http.js","projects/forum/services/post.js","projects/forum/utils/misc.js","projects/forum/components/UserAvatar.jsx","projects/forum/components/PostEntry.jsx","utils/store.js","projects/forum/components/ChatInput.jsx","projects/forum/components/PostList.jsx","projects/forum/hooks/post.js","components/common/Markdown.jsx","projects/forum/components/PostBody.jsx","projects/forum/components/Comments.jsx","projects/forum/components/Post.jsx","projects/forum/components/Forum.jsx","utils/http.js","components/common/User.jsx","hooks/authentication.js","components/LanguageSwitcher.jsx","projects/labs/laboratories/idioms/hooks/dictionary.js","projects/labs/laboratories/idioms/Idioms.jsx","components/common/Button.jsx","projects/labs/laboratories/hexie/HexieEncoder.jsx","projects/labs/laboratories/web-color-picker/WebColorPicker.jsx","projects/labs/laboratories/regex-dictionary/RegexDictionary.jsx","projects/labs/laboratories/regex-dictionary/hooks/regexDictionary.js","projects/labs/Labs.jsx","projects/games/games/emojiSpin/components/common/EmojiSprite.jsx","projects/games/games/emojiSpin/components/StatusBar.jsx","projects/games/games/emojiSpin/core.js","projects/games/games/emojiSpin/components/Cell.jsx","projects/games/games/emojiSpin/components/Column.jsx","projects/games/games/emojiSpin/components/SlotArea.jsx","projects/games/games/emojiSpin/components/VFXArea.jsx","projects/games/games/emojiSpin/screens/SlotScreen.jsx","projects/games/games/emojiSpin/EmojiSpin.jsx","projects/games/Games.jsx","projects/blog/services/blog.js","projects/blog/components/Article.jsx","projects/blog/hooks/blog.js","projects/blog/components/BlogList.jsx","projects/blog/components/Blog.jsx","projects/cv/components/Background.jsx","projects/cv/components/Timeline.jsx","projects/cv/CV.jsx","components/GlobalRouteHandler.jsx","App.js","serviceWorker.js","index.js"],"names":["useTitle","title","useEffect","document","Home","props","className","window","CSS","registerProperty","data-fallback","$$","http","axios","create","baseURL","authorized","getHttp","token","localStorage","getItem","defaults","headers","common","get","post","getPosts","a","result","data","Error","getPost","id","getComments","postThread","body","replyThread","getTimeDiff","target","origin","Date","timeDiff","Math","abs","getTime","isBefore","seconds","floor","minutes","hours","days","weeks","months","years","UserAvatar","user","onClickAvatar","useCallback","e","open","html_url","stopPropagation","preventDefault","onClick","src","avatar_url","alt","login","PostEntry","created_at","comments","number","updated_at","to","LOADING","Symbol","ME","LANG","CV","IS_CV","FULLSCREEN","LANGUAGES","EmojiSpin","COINS","DECK","SPIN_RESULT","DIMENTIONS","STATE","Blog","BLOGS","RegexDictionary","WORDS","setup","init","en","navigator","language","cols","rows","columns","Array","from","length","_","y","column","slots","x","row","slot","undefined","Button","children","rest","href","ChatInput","hasBody","onPost","me","useData","useState","setTitle","setBody","doPost","type","value","onChange","PostList","posts","setPosts","loadPosts","then","usePostList","reload","whevent","emit","catch","ex","swal","fire","console","error","on","off","map","key","node_id","components","code","node","inline","match","exec","style","PreTag","String","replace","Markdown","remarkPlugins","gfm","PostBody","toLocaleString","year","month","day","hour","minute","hour12","Comment","comment","isMe","Comments","lastTime","toString","time","shouldShowTime","Post","useParams","setPost","setComments","loadPost","loadComments","usePostDetail","reply","trim","useReplyThread","Forum","path","component","exact","put","del","delete","User","location","client_id","client_secret","setItem","html","icon","confirmButtonText","cancelButtonText","showCloseButton","showCancelButton","isConfirmed","setData","removeItem","useAuthentication","onClickUser","LanguageSwitcher","lang","languages","switchLanguage","indexOf","log","whi18n","cache","Idioms","dictionary","setDictionary","useDictionary","history","useHistory","shouldUpdate","setShouldUpdate","searchString","URLSearchParams","search","q","decodeURI","pron","tone","initial","options","setOptions","query","setQuery","results","setResults","filter","pinyin","split","some","t","text","pys","toneType","multiple","py","every","py1","word","includes","push","pathname","encodeURI","Object","values","onClickWord","toast","copy","autoComplete","disabled","toLowerCase","placeholder","name","checked","htmlFor","r","HexieEncoder","input","setInput","customDict","setCustomDict","output","setOutput","copied","setCopied","outputComp","useRef","inputComp","act","dict","txt","dictArr","useMemo","d","onClickEncode","onClickDecode","doEncode","encode","doDecode","decode","onClickOutput","current","select","setSelectionRange","execCommand","setTimeout","onFocusInput","ref","onFocus","readOnly","getRGB","hex","g","b","parseInt","webColorRGBs","fromEntries","entries","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","goldenrod","gold","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavenderblush","lavender","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","rgbToHsl","h","s","max","min","l","easeInOutCubic","pow","WebColorPicker","color","setColor","brightness","webColors","mins","dist","Infinity","orgH","orgS","orgL","forEach","distH","distS","distL","i","j","onClickColor","disableAlpha","backgroundColor","opacity","words","useWords","regex","setRegex","illegal","setIllegal","setOverflow","regexRef","anchored","filteredWords","setFilteredWords","useDebouncedEffect","regexStr","regexp","RegExp","count","filtered","test","copyWord","onBlur","Labs","EmojiSprite","StatusBar","coins","empty","rarity","symbols","emoji","affect","source","score","boosters","desc","initiated","calculateSlot","res","base","add","mul","c","Slot","data-column","data-row","shouldDelay","Column","bias","setBias","spinning","setSpinning","stored","setStored","onSpin","phase","step","requestAnimationFrame","xmlns","version","in","stdDeviation","SlotArea","VFXArea","scoresRef","onCalcScore","cell","querySelector","getBoundingClientRect","ax","ay","width","height","scoreDiv","createElement","classList","innerText","top","left","appendChild","class","wait","ms","Promise","resolve","SlotScreen","deck","spin","shuffledDeck","sort","random","splice","n","find","this","fill","join","useDeck","getResult","state","onFinishSpin","getData","col","val","Games","blogs","date","file","tags","getBlogList","getBlog","blog","Article","setBlog","useBlog","BlogList","reverse","useBlogList","data-empty","tag","Particle","startingX","startingY","blur","moveDirection","spinDirection","moveDuration","spinDuration","timing","size","containeStyle","animationDirection","animationDuration","animationDelay","particleStyle","Background","particles","ratio","setRatio","onScroll","scrollHeight","clientHeight","scrollTop","addEventListener","removeEventListener","Timeline","content","institution","url","startsWith","dangerouslySetInnerHTML","__html","Stars","reduce","acc","pic","kata","email","phone","github","codepen","stackoverflow","linkedin","itchio","homepage","CV_VIEW","AVAILABLE_LANGUAGES","myName","data-role","GlobalRouteHandler","newLang","App","onHeightChange","maxHeight","innerHeight","useMaxHeight","cv","ViewCV","isCV","fullscreen","download","fontSize","marginLeft","rel","getFullYear","hideProgressBar","closeOnClick","autoClose","Boolean","hostname","initStore","initI18n","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.9b218038.chunk.js","sourcesContent":["import { useEffect, useCallback, useState } from 'react';\n\nexport const useMaxHeight = () => {\n\tconst onHeightChange = useCallback(() => {\n\t\tdocument.body.style.maxHeight = window.innerHeight + 'px';\n\t}, []);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', onHeightChange);\n\n\t\tonHeightChange();\n\t}, [onHeightChange]);\n}\n\nexport const useTitle = title => {\n\tuseEffect(() => {\n\t\tdocument.title = title;\n\t}, [title]);\n}\n\nexport const useAsync = (fn, deps = []) => {\n\tconst [ready, setReady] = useState(false);\n\tuseEffect(() => {\n\t\tfn().then(() => setReady(true));\n\t}, deps);\n\n\treturn ready;\n}","import React from 'react';\nimport { useTitle } from '../../hooks/misc';\nimport $$ from 'whi18n';\n\nconst Home = props => {\n\tuseTitle('wheatup');\n\n\treturn (\n\t\t<div className={`Home${window.CSS.registerProperty ? '' : ' not-support'}`}>\n\t\t\t<h2 data-fallback={$$`wip`}></h2>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n","import axios from 'axios';\n\nconst http = axios.create({\n\tbaseURL: 'https://api.github.com/repos/wheatup/forum-threads',\n});\n\nlet authorized = false;\n\nconst getHttp = () => {\n\tif (!authorized) {\n\t\tlet token = window.localStorage.getItem('token');\n\t\tif (token) {\n\t\t\thttp.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n\t\t\tauthorized = true;\n\t\t}\n\t}\n\treturn http;\n}\n\nexport const get = (...args) => getHttp().get(...args);\nexport const post = (...args) => getHttp().post(...args);\nexport const put = (...args) => getHttp().put(...args);\nexport const del = (...args) => getHttp().delete(...args);\n\nexport default {\n\tget,\n\tpost,\n\tput,\n\tdel\n};","import http from \"../utils/http\";\n\nexport const getPosts = async () => {\n\tconst result = await http.get('/issues');\n\tif (result && result.data) {\n\t\treturn result.data;\n\t} else {\n\t\tthrow new Error(result);\n\t}\n};\n\nexport const getPost = async id => {\n\tconst result = await http.get(`/issues/${id}`);\n\tif (result && result.data) {\n\t\treturn result.data;\n\t} else {\n\t\tthrow new Error(result);\n\t}\n};\n\nexport const getComments = async id => {\n\tconst result = await http.get(`/issues/${id}/comments`);\n\tif (result && result.data) {\n\t\treturn result.data;\n\t} else {\n\t\tthrow new Error(result);\n\t}\n}\n\nexport const postThread = async (title, body) => {\n\tconst result = await http.post('/issues', {\n\t\ttitle,\n\t\tbody,\n\t}, {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Accept': 'application/vnd.github.v3+json'\n\t\t}\n\t});\n\n\tif (result && result.data) {\n\t\treturn result.data;\n\t} else {\n\t\tthrow new Error(result);\n\t}\n}\n\n\nexport const replyThread = async (id, body) => {\n\tconst result = await http.post(`/issues/${id}/comments`, {\n\t\tbody,\n\t}, {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Accept': 'application/vnd.github.v3+json'\n\t\t}\n\t});\n\n\tif (result && result.data) {\n\t\treturn result.data;\n\t} else {\n\t\tthrow new Error(result);\n\t}\n}","import $$ from 'whi18n';\n\nexport const getTimeDiff = (target, origin = new Date()) => {\n\tif (typeof target === 'string') {\n\t\ttarget = new Date(target);\n\t}\n\n\tif (typeof origin === 'string') {\n\t\torigin = new Date(origin);\n\t}\n\n\tconst timeDiff = Math.abs(origin.getTime() - target.getTime());\n\tconst isBefore = origin.getTime() - target.getTime() < 0;\n\n\tif (timeDiff < 1000) {\n\t\treturn $$`time-diff.just-now`;\n\t} else if (timeDiff < 60 * 1000) {\n\t\tconst seconds = Math.floor(timeDiff / 1000);\n\t\tif(seconds === 1) {\n\t\t\treturn $$('time-diff.second', seconds, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.seconds', seconds, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else if (timeDiff < 60 * 60 * 1000) {\n\t\tconst minutes = Math.floor(timeDiff / (60 * 1000));\n\t\tif(minutes === 1) {\n\t\t\treturn $$('time-diff.minute', minutes, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.minutes', minutes, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else if (timeDiff < 24 * 60 * 60 * 1000) {\n\t\tconst hours = Math.floor(timeDiff / (60 * 60 * 1000));\n\t\tif(hours === 1) {\n\t\t\treturn $$('time-diff.hour', hours, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.hours', hours, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else if (timeDiff < 7 * 24 * 60 * 60 * 1000) {\n\t\tconst days = Math.floor(timeDiff / (24 * 60 * 60 * 1000));\n\t\tif(days === 1) {\n\t\t\treturn $$('time-diff.day', days, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.days', days, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else if (timeDiff < 30 * 24 * 60 * 60 * 1000) {\n\t\tconst weeks = Math.floor(timeDiff / (7 * 24 * 60 * 60 * 1000));\n\t\tif(weeks === 1) {\n\t\t\treturn $$('time-diff.week', weeks, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.weeks', weeks, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else if (timeDiff < 365 * 30 * 24 * 60 * 60 * 1000) {\n\t\tconst months = Math.floor(timeDiff / (30 * 24 * 60 * 60 * 1000));\n\t\tif(months === 1) {\n\t\t\treturn $$('time-diff.month', months, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.months', months, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t} else {\n\t\tconst years = Math.floor(timeDiff / (365 * 24 * 60 * 60 * 1000))\n\t\tif(years === 1) {\n\t\t\treturn $$('time-diff.year', years, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t} else {\n\t\t\treturn $$('time-diff.years', years, isBefore ? $$`time-diff.before` : $$`time-diff.ago`);\n\t\t}\n\t}\n};\n\nexport default {\n\tgetTimeDiff\n};","import React, { useCallback } from 'react';\n\nconst UserAvatar = ({ user }) => {\n\n\tconst onClickAvatar = useCallback(e => {\n\t\twindow.open(user.html_url);\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}, [])\n\n\treturn (\n\t\t<div onClick={onClickAvatar} className=\"UserAvatar\">{\n\t\t\tuser ? <>\n\t\t\t\t<img src={user.avatar_url} alt={user.login} />\n\t\t\t\t<h2>{user.login}</h2>\n\t\t\t</> :\n\t\t\t\t<i className=\"icon-user\"></i>\n\n\t\t}</div>\n\t);\n}\n\nexport default UserAvatar;","import React, { useEffect } from 'react';\nimport { getTimeDiff } from '../utils/misc';\nimport { Link } from 'react-router-dom';\nimport { useCallback } from 'react';\nimport UserAvatar from './UserAvatar';\nimport $$ from 'whi18n';\n\nconst PostEntry = ({ post }) => {\n\tconst { title, user, created_at, comments, updated_at, number } = post;\n\n\treturn (\n\t\t<Link to={`/forum/post/${number}`} className=\"PostEntry\">\n\t\t\t<UserAvatar user={user} />\n\t\t\t<div className=\"summary\">\n\t\t\t\t<h2><p>{title}</p></h2>\n\t\t\t\t<time className=\"create\">{getTimeDiff(created_at)}</time>\n\t\t\t</div>\n\t\t\t<span className=\"details\">\n\t\t\t\t<span className=\"comments\">{comments}</span>\n\t\t\t</span>\n\t\t</Link>\n\t);\n}\n\nexport default PostEntry;","import { init } from 'wherehouse';\n\nexport const LOADING = Symbol();\nexport const ME = Symbol();\nexport const LANG = Symbol();\nexport const CV = Symbol();\nexport const IS_CV = Symbol();\nexport const FULLSCREEN = Symbol();\nexport const LANGUAGES = Symbol();\n\nexport const EmojiSpin = {\n\tCOINS: Symbol(),\n\tDECK: Symbol(),\n\tSPIN_RESULT: Symbol(),\n\tDIMENTIONS: Symbol(),\n\tSTATE: Symbol(),\n};\n\nexport const Blog = {\n\tBLOGS: Symbol()\n};\n\nexport const RegexDictionary = {\n\tWORDS: Symbol()\n};\n\nexport const setup = () => init({\n\t[LOADING]: '',\n\t[ME]: null,\n\t[LANG]: window.localStorage.getItem('lang') || ({ en: 'en-US', 'en-BR': 'en-US', 'zh-CN': 'zh-CN', 'zh-TW': 'zh-CN' })[navigator.language] || 'en-US',\n\t[LANGUAGES]: ['en-US', 'zh-CN'],\n\t[CV]: !!window.localStorage.getItem('cv'),\n\t[IS_CV]: false,\n\t[FULLSCREEN]: false,\n\n\t[EmojiSpin.COINS]: 0,\n\t[EmojiSpin.DECK]: [],\n\t[EmojiSpin.DIMENTIONS]: [5, 5],\n\t[EmojiSpin.STATE]: 'IDLE',\n\t[EmojiSpin.SPIN_RESULT]: { cols: 5, rows: 5, columns: Array.from({ length: 5 }, (_, y) => ({ column: y, slots: Array.from({ length: 5 }, (_, x) => ({ column: y, row: x, slot: undefined })) }))},\n\n\t[Blog.BLOGS]: [],\n\n\t[RegexDictionary.WORDS]: [],\n});","import React, { useCallback } from 'react';\nimport { useData } from 'wherehouse';\nimport { ME } from '../../../utils/store';\nimport { useState } from 'react';\nimport whevent from 'whevent';\n\nconst Button = ({ children, ...rest }) => {\n\treturn (\n\t\t<a className=\"Button\" href=\"javascript: void(0)\" {...rest}>{children}</a>\n\t);\n};\n\nconst ChatInput = ({ hasBody, onPost }) => {\n\tconst me = useData(ME);\n\n\tconst [title, setTitle] = useState('');\n\tconst [body, setBody] = useState('');\n\n\tconst doPost = useCallback(() => {\n\t\tif (onPost) {\n\t\t\tonPost(title, body);\n\t\t\tsetTitle('');\n\t\t\tsetBody('');\n\t\t}\n\t}, [title, body, onPost]);\n\n\treturn (\n\t\t<div className={`ChatInput${me ? '' : ' locked'}`}>\n\t\t\t<div className=\"title-area\">\n\t\t\t\t<Button><i className=\"icon-grin\"></i></Button>\n\t\t\t\t<Button><i className=\"icon-images\"></i></Button>\n\t\t\t\t{hasBody ? <input type=\"text\" value={title} onChange={e => setTitle(e.target.value)} /> : <textarea rows=\"1\" value={title} onChange={e => setTitle(e.target.value)}></textarea>}\n\t\t\t\t<Button onClick={doPost}><i className=\"icon-paper-plane\"></i></Button>\n\t\t\t</div>\n\t\t\t{hasBody && <div className=\"body-area\">\n\t\t\t\t<textarea rows=\"4\" value={body} onChange={e => setBody(e.target.value)}></textarea>\n\t\t\t</div>}\n\t\t</div>\n\t);\n}\n\nexport default ChatInput;","import React, { useEffect } from 'react';\nimport { usePostList, usePostThread } from '../hooks/post';\nimport PostEntry from './PostEntry';\nimport ChatInput from './ChatInput';\nimport { useCallback } from 'react';\nimport swal from 'sweetalert2';\nimport whevent from 'whevent';\n\nconst PostList = props => {\n\tconst [posts, reload] = usePostList();\n\n\tconst post = usePostThread();\n\n\tuseEffect(() => {\n\t\twhevent.on('REFRESH_POSTS', reload);\n\n\t\treturn () => whevent.off('REFRESH_POSTS', reload);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"PostList\">\n\t\t\t<div className=\"list-wrapper\">\n\t\t\t\t<div className=\"list\">{posts && posts.map(post => (\n\t\t\t\t\t<PostEntry key={post.node_id} post={post} />\n\t\t\t\t))}</div>\n\t\t\t</div>\n\t\t\t<ChatInput hasBody={true} onPost={post} />\n\t\t</div>\n\t);\n}\n\nexport default PostList;","import { useState, useEffect, useCallback } from \"react\";\nimport { getPosts, getPost, getComments, postThread, replyThread } from \"../services/post\";\nimport swal from \"sweetalert2\";\nimport whevent from \"whevent\";\nimport $$ from 'whi18n';\n\nexport const usePostList = () => {\n\tconst [posts, setPosts] = useState([]);\n\n\tconst loadPosts = useCallback(() => {\n\t\tgetPosts().then(posts => {\n\t\t\tsetPosts(posts);\n\t\t});\n\t}, [setPosts]);\n\n\tuseEffect(() => {\n\t\tloadPosts();\n\t}, []);\n\n\treturn [posts, loadPosts];\n};\n\nexport const usePostDetail = id => {\n\tconst [post, setPost] = useState(null);\n\tconst [comments, setComments] = useState([]);\n\n\tconst loadPost = useCallback(() => {\n\t\tid && getPost(id).then(post => {\n\t\t\tsetPost(post);\n\t\t});\n\t}, [id, setPost]);\n\n\tconst loadComments = useCallback(() => {\n\t\tid && getComments(id).then(post => {\n\t\t\tsetComments(post);\n\t\t});\n\t}, [id, setComments]);\n\n\tuseEffect(() => {\n\t\tloadPost();\n\t\tloadComments();\n\t}, [id]);\n\n\treturn [post, comments, loadPost, loadComments];\n};\n\nexport const usePostThread = () => {\n\tconst post = useCallback((title, body) => {\n\t\tif (!title) {\n\t\t\tswal.fire($$`error`, $$`please-enter-title`, 'error');\n\t\t\treturn;\n\t\t}\n\n\t\tpostThread(title, body).then(e => {\n\t\t\twhevent.emit('REFRESH_POSTS');\n\t\t}).catch(ex => {\n\t\t\tswal.fire($$`post-failed`, $$`post-failed-try-again`, \"error\");\n\t\t\tconsole.error(ex);\n\t\t})\n\t}, []);\n\n\treturn post;\n};\n\nexport const useReplyThread = id => {\n\tconst post = useCallback(body => {\n\t\tif (!body || !body.trim()) {\n\t\t\tswal.fire($$`error`, $$`Please enter the comment!`, 'error');\n\t\t\treturn;\n\t\t}\n\n\t\treplyThread(id, body).then(e => {\n\t\t\twhevent.emit('REFRESH_COMMENTS');\n\t\t}).catch(ex => {\n\t\t\tswal.fire($$`post-failed`, $$`post-failed-try-again`, \"error\");\n\t\t\tconsole.error(ex);\n\t\t})\n\t}, [id]);\n\n\treturn post;\n}","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { nord as style } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport gfm from 'remark-gfm';\n\nconst components = {\n\tcode({ node, inline, className, children, ...props }) {\n\t\tconst match = /language-(\\w+)/.exec(className || '');\n\t\treturn !inline && match ? <SyntaxHighlighter style={style} language={match[1]} PreTag=\"div\" children={String(children).replace(/\\n$/, '')} {...props} /> : <code className={className} {...props} />;\n\t}\n};\n\nconst Markdown = ({ children, ...rest }) => {\n\treturn (\n\t\t<div className=\"Markdown\">\n\t\t\t<ReactMarkdown remarkPlugins={[gfm]} components={components} children={children} {...rest} />\n\t\t</div>\n\t);\n};\n\nexport default Markdown;\n","import React, { useEffect } from 'react';\nimport UserAvatar from './UserAvatar';\nimport { getTimeDiff } from '../utils/misc';\nimport Markdown from '../../../components/common/Markdown';\nimport $$ from 'whi18n';\n\nconst PostBody = ({ post }) => {\n\tconst { user, title, body, created_at } = post || {};\n\treturn (\n\t\t<div className=\"PostBody\">\n\t\t\t{post && (\n\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t<div className=\"title-area\">\n\t\t\t\t\t\t<UserAvatar user={user} />\n\t\t\t\t\t\t<div className=\"info-area\">\n\t\t\t\t\t\t\t<h2>{title}</h2>\n\t\t\t\t\t\t\t<time title={new Date(created_at).toLocaleString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: false })}>{getTimeDiff(created_at)}</time>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{body && (\n\t\t\t\t\t\t<div className=\"body-area\">\n\t\t\t\t\t\t\t<Markdown>{body}</Markdown>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default PostBody;\n","import React, { useEffect } from 'react';\nimport { useData } from 'wherehouse';\nimport { ME } from '../../../utils/store';\nimport UserAvatar from './UserAvatar';\nimport { useMemo } from 'react';\nimport Markdown from '../../../components/common/Markdown';\nimport { getTimeDiff } from '../utils/misc';\nimport { useCallback } from 'react';\nimport { useState } from 'react';\n\n\nconst Comments = ({ comments }) => {\n\n\n\n\tlet lastTime = 0;\n\tconst shouldShowTime = time => {\n\t\tif (time - lastTime > 60 * 1000) {\n\t\t\tlastTime = time;\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tconst me = useData(ME);\n\tconst isMe = useCallback(user => me && me.id === user.id);\n\n\treturn (\n\t\t<div className=\"Comments\">{comments.map(comment => (\n\t\t\t<div key={comment.id.toString()} className=\"comment-wrapper\">\n\t\t\t\t{shouldShowTime(new Date(comment.created_at).getTime()) && <time className={isMe(comment.user) ? 'me' : ''} title={new Date(comment.created_at).toLocaleString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: false })}>{getTimeDiff(comment.created_at)}</time>}\n\t\t\t\t<Comment comment={comment} isMe={isMe(comment.user)} />\n\t\t\t</div>\n\t\t))}\n\t\t</div>\n\t);\n}\n\nconst Comment = ({ comment, isMe }) => {\n\tconst { body, user } = comment;\n\t\n\treturn (\n\t\t<div className={`Comment${isMe ? ' me' : ''}`}>\n\t\t\t<UserAvatar user={user} />\n\t\t\t<div className=\"content\">\n\t\t\t\t<Markdown>{body}</Markdown>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n\n\nexport default Comments;","import React, { useEffect } from 'react';\nimport { usePostDetail, useReplyThread } from '../hooks/post';\nimport { useParams } from 'react-router-dom';\nimport PostBody from './PostBody';\nimport Comments from './Comments';\nimport ChatInput from './ChatInput';\nimport whevent from 'whevent';\n\nconst Post = props => {\n\tconst { id } = useParams();\n\tconst [post, comments, , loadComments] = usePostDetail(id);\n\n\tconst reply = useReplyThread(id);\n\n\tuseEffect(() => {\n\t\twhevent.on('REFRESH_COMMENTS', loadComments);\n\n\t\treturn () => whevent.off('COMMENTS', loadComments);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"Post\">\n\t\t\t<div className=\"post-area\">\n\t\t\t\t<div className=\"post-wrapper\">\n\t\t\t\t\t<PostBody post={post} />\n\t\t\t\t\t<Comments comments={comments} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChatInput onPost={reply} />\n\t\t</div>\n\t);\n};\n\nexport default Post;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport PostList from './PostList';\nimport Post from './Post';\nimport { useTitle } from '../../../hooks/misc';\n\nconst Forum = props => {\n\tuseTitle('wheatup');\n\treturn (\n\t\t<div className=\"Forum\">\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/forum/post/:id\" component={Post} />\n\t\t\t\t<Route path=\"/forum/\" component={PostList} exact />\n\t\t\t</Switch>\n\t\t</div>\n\t);\n};\n\nexport default Forum;\n","import axios from 'axios';\n\nexport const http = axios.create();\n\nexport const get = http.get;\nexport const post = http.post;\nexport const put = http.put;\nexport const del = http.delete;\n\nexport default {\n\thttp,\n\tget,\n\tpost,\n\tput,\n\tdel\n};","import React, { useEffect } from 'react';\nimport { useAuthentication } from '../../hooks/authentication';\nimport { useCallback } from 'react';\n\nconst User = props => {\n\tconst [user, login] = useAuthentication();\n\n\tconst onClickUser = useCallback(() => {\n\t\twindow.open(user.html_url);\n\t}, [user]);\n\n\treturn (\n\t\t<a className={`User${user ? ' login' : ''}`} href=\"javascript: void(0)\" onClick={user ? onClickUser: login}>{\n\t\t\tuser ? <img src={user.avatar_url} alt={user.login} title={user.login} /> : <i className=\"icon-user\"></i>\n\t\t}</a>\n\t);\n}\n\nexport default User;","import { useEffect, useCallback } from \"react\";\nimport http from \"../utils/http\";\nimport swal from \"sweetalert2\";\nimport { ME } from \"../utils/store\";\nimport { setData, useData } from \"wherehouse\";\nimport $$ from 'whi18n';\n\n\n// develop\n// const CLIENT_ID = '927fbe8aa1a54d91db14';\n// const CLIENT_SECRET = 'ef21685a2fadd25826f34083c9fa374c7ba78718';\n\n// product\nconst CLIENT_ID = '9a7b4e01285d97e29469';\nconst CLIENT_SECRET = '340d6e3e650e8d915562cab6eb1ae2b295abc7c9';\n\n\nexport const useAuthentication = () => {\n\tconst user = useData(ME);\n\n\tconst login = useCallback(() => {\n\t\twindow.location.href = `https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=repo`;\n\t}, [])\n\n\tuseEffect(() => {\n\t\tconst code = /code=(\\w+)/[Symbol.match](window.location.href);\n\t\tif (code && code[1]) {\n\t\t\t// TODO: use a better way to handle cors requests\n\t\t\t// http.post('https://github.com/login/oauth/access_token', {\n\t\t\thttp.post('https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token', {\n\t\t\t\tclient_id: CLIENT_ID,\n\t\t\t\tclient_secret: CLIENT_SECRET,\n\t\t\t\tcode: code[1]\n\t\t\t}).then(e => {\n\t\t\t\tif (e.data) {\n\t\t\t\t\tconst token = /access_token=(\\w+)/[Symbol.match](e.data);\n\t\t\t\t\tif (token && token[1]) {\n\t\t\t\t\t\twindow.localStorage.setItem('token', token[1]);\n\t\t\t\t\t\twindow.location.href = window.location.href.replace(/[&?]code=\\w+/, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).catch(ex => {\n\t\t\t\tswal.fire({\n\t\t\t\t\ttitle: $$`auth.auth-failed`,\n\t\t\t\t\thtml: $$`auth.auth-failed-detail`,\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tconfirmButtonText: $$`auth.grant-auth`,\n\t\t\t\t\tcancelButtonText: $$`auth.cancel`,\n\t\t\t\t\tshowCloseButton: true,\n\t\t\t\t\tshowCancelButton: true\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tif (result.isConfirmed) {\n\t\t\t\t\t\twindow.open('https://cors-anywhere.herokuapp.com/');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconsole.error(ex);\n\t\t\t})\n\t\t} else if (!user) {\n\t\t\tconst token = window.localStorage.getItem('token');\n\t\t\tif (token) {\n\t\t\t\thttp.get('https://api.github.com/user', {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': 'token ' + token\n\t\t\t\t\t}\n\t\t\t\t}).then(e => {\n\t\t\t\t\tif (e && e.data) {\n\t\t\t\t\t\tsetData(ME, e.data);\n\t\t\t\t\t}\n\t\t\t\t}).catch(ex => {\n\t\t\t\t\tswal.fire($$`auth.auth-failed`, $$`auth.auth-expired-detail`, \"error\");\n\t\t\t\t\tconsole.error(ex);\n\t\t\t\t\twindow.localStorage.removeItem('token');\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t}, [window.location.href, user]);\n\n\treturn [user, login];\n};","import React, { useCallback, useState } from 'react';\nimport { setData, useData } from 'wherehouse';\nimport { LANG, LANGUAGES } from '../utils/store';\nimport whi18n, { init } from 'whi18n';\nimport http from '../utils/http';\n\nconst LanguageSwitcher = () => {\n\tconst lang = useData(LANG);\n\tconst languages = useData(LANGUAGES);\n\n\tconst switchLanguage = useCallback(async () => {\n\t\tconst target = languages[(languages.indexOf(lang) + 1) % languages.length];\n\t\tconsole.log(languages, target);\n\t\tawait init(target, async lang => (await http.get(`/i18n/${lang}.json`)).data);\n\t\twindow.location.reload();\n\t}, [lang, languages]);\n\n\treturn (\n\t\t<a className=\"LanguageSwitcher\" href=\"javascript: void(0)\" title={whi18n`switch-language`} onClick={switchLanguage}>\n\t\t\t<img src={`/images/i18n/${lang}.${lang === 'ja-JP' ? 'png' : 'svg'}`} alt={whi18n`switch-language`} />\n\t\t</a>\n\t);\n};\n\nexport default LanguageSwitcher;\n","import { useEffect, useState } from \"react\";\nimport { get } from '../../../../../utils/http';\n\nlet cache = [];\n\nexport const useDictionary = () => {\n\tconst [dictionary, setDictionary] = useState(cache);\n\n\tuseEffect(() => {\n\t\tif (!dictionary.length) {\n\t\t\tget('/data/idiom.min.json').then(({ data }) => {\n\t\t\t\tsetDictionary(data);\n\t\t\t});\n\t\t}\n\t}, [dictionary]);\n\t\n\n\treturn dictionary;\n}","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { debounce } from '../../../../utils/misc';\nimport { useDictionary } from './hooks/dictionary';\nimport { pinyin } from 'pinyin-pro';\nimport copy from 'copy-to-clipboard';\nimport { useHistory } from 'react-router-dom';\nimport { useTitle } from '../../../../hooks/misc';\nimport $$ from 'whi18n';\nimport { toast } from 'react-toastify';\n\nlet timer;\nconst Idioms = ({ location }) => {\n\tconst dictionary = useDictionary();\n\tconst history = useHistory();\n\tuseTitle($$`_idioms.title`);\n\n\tconst [shouldUpdate, setShouldUpdate] = useState(false);\n\n\tconst searchString = new URLSearchParams(location?.search ?? '');\n\tlet q = decodeURI(searchString.get('q') || '');\n\tlet pron = !!+decodeURI(searchString.get('pron') || '0');\n\tlet tone = !!+decodeURI(searchString.get('tone') || '0');\n\tlet initial = !!+decodeURI(searchString.get('initial') || '1');\n\n\tconst [options, setOptions] = useState({ pron: !!+pron, tone: !!+tone, initial: !!+initial });\n\tconst [query, setQuery] = useState(q);\n\tconst [results, setResults] = useState([]);\n\n\tconst search = useCallback(() => setShouldUpdate(true), []);\n\n\tuseEffect(() => {\n\t\tconst searchString = new URLSearchParams(location?.search ?? '');\n\t\tq = decodeURI(searchString.get('q') || '');\n\t\tpron = !!+decodeURI(searchString.get('pron') || '0');\n\t\ttone = !!+decodeURI(searchString.get('tone') || '0');\n\t\tinitial = !!+decodeURI(searchString.get('initial') || '1');\n\n\t\tsetOptions({ pron, tone, initial });\n\t\tsetQuery(q);\n\n\t\tif (/^\\w+$/[Symbol.match](q)) {\n\t\t\tif (tone && /\\d$/[Symbol.match](q)) {\n\t\t\t\tif (initial) {\n\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pinyin.split(' ')[0] === q));\n\t\t\t\t} else {\n\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pinyin.split(' ').some(t => t === q)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (initial) {\n\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pinyin.split(' ')[0].replace(/\\d+/g, '') === q.replace(/\\d+/g, '')));\n\t\t\t\t} else {\n\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pinyin.split(' ').some(t => t.replace(/\\d+/g, '') === q.replace(/\\d+/g, ''))));\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (/^[\\u4e00-\\u9fa5，]+$/[Symbol.match](q)) {\n\t\t\tconst text = q[q.length - 1];\n\t\t\tif (pron) {\n\t\t\t\tlet pys = pinyin(text, { toneType: 'num', multiple: true }).split(' ');\n\t\t\t\tif (tone) {\n\t\t\t\t\tif (initial) {\n\t\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pys.some(py => py === pinyin.split(' ')[0])));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpys = [...q].map(e => pinyin(e, { toneType: 'num', multiple: true }).split(' '));\n\t\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pys.every(py1 => py1.some(py => pinyin.split(' ').some(t => t === py)))));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (initial) {\n\t\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pys.some(py => py.replace(/\\d+/g, '') === pinyin.split(' ')[0].replace(/\\d+/g, ''))));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpys = [...q].map(e => pinyin(e, { toneType: 'num', multiple: true }).split(' '));\n\t\t\t\t\t\tsetResults(dictionary.filter(({ pinyin }) => pys.every(py1 => py1.some(py => pinyin.split(' ').some(t => t.replace(/\\d+/g, '') === py.replace(/\\d+/g, ''))))));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (initial) {\n\t\t\t\t\tsetResults(dictionary.filter(({ word }) => word[0] === text));\n\t\t\t\t} else {\n\t\t\t\t\tsetResults(dictionary.filter(({ word }) => [...q].every(e => word.includes(e))));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tsetResults([]);\n\t\t}\n\t}, [location, history, dictionary]);\n\n\tuseEffect(() => {\n\t\tif (!shouldUpdate) return;\n\t\tsetShouldUpdate(false);\n\n\t\thistory.push(location.pathname + `?q=${encodeURI(query)}&initial=${+options.initial}&pron=${+options.pron}&tone=${+options.tone}`);\n\t}, [shouldUpdate, ...[Object.values(options)], location]);\n\n\tuseEffect(() => {\n\t\tif (!dictionary?.length) return;\n\n\t\tif (/\\s/[Symbol.match](query)) {\n\t\t\tsetQuery(query.replace(/\\s+/g, ''));\n\t\t}\n\n\t\tsearch();\n\t}, [query, options.pron, options.tone, options.initial, dictionary]);\n\n\tconst onClickWord = useCallback(text => {\n\t\ttoast($$`_idioms.copied`);\n\t\tcopy(text);\n\t\tsetQuery(text);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"Idioms\">\n\t\t\t<h1>{$$`_idioms.title`}</h1>\n\t\t\t<input className=\"input\" autoComplete=\"false\" disabled={dictionary.length === 0} value={query} onChange={({ target: { value } }) => setQuery(value.toLowerCase())} placeholder={$$`_idioms.placeholder`} />\n\t\t\t<div className=\"options\">\n\t\t\t\t<div className={`option-group`}>\n\t\t\t\t\t<input id=\"initial\" name=\"initial\" type=\"checkbox\" checked={options.initial} onChange={({ target: { checked } }) => setOptions({ ...options, initial: checked })} />\n\t\t\t\t\t<label htmlFor=\"initial\">{$$`_idioms.initial`}</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"option-group\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"pron\"\n\t\t\t\t\t\tname=\"pron\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={options.pron}\n\t\t\t\t\t\tonChange={({ target: { checked } }) => {\n\t\t\t\t\t\t\tif (!checked) {\n\t\t\t\t\t\t\t\tsetOptions({ ...options, pron: false, tone: false });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetOptions({ ...options, pron: checked });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"pron\">{$$`_idioms.homophone`}</label>\n\t\t\t\t</div>\n\t\t\t\t<div className={`option-group${options.pron ? '' : ' disabled'}`}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"tone\"\n\t\t\t\t\t\tname=\"tone\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={options.tone}\n\t\t\t\t\t\tonChange={({ target: { checked } }) => {\n\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\tsetOptions({ ...options, pron: true, tone: true });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetOptions({ ...options, tone: checked });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"tone\">{$$`_idioms.tone`}</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"results\">\n\t\t\t\t{results.map(r => (\n\t\t\t\t\t<span key={r.word} onClick={() => onClickWord(r.word)}>\n\t\t\t\t\t\t{r.word}\n\t\t\t\t\t</span>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Idioms;\n","import React from 'react';\n\nconst Button = ({ children, disabled, onClick, ...rest }) => {\n\treturn (\n\t\t<a onClick={(...args) => onClick && !disabled && onClick(...args)} className={`Button${disabled ? ' disabled' : ''}`} href=\"javascript: void(0)\" {...rest}>\n\t\t\t{children}\n\t\t</a>\n\t);\n};\n\nexport default Button;\n","import React, { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport Button from '../../../../components/common/Button';\nimport { encode, decode } from 'hexie-encode';\nimport { useHistory } from 'react-router-dom';\nimport { useTitle } from '../../../../hooks/misc';\nimport $$ from 'whi18n';\n\nconst HexieEncoder = ({ location }) => {\n\tuseTitle($$`hexie-encoder`);\n\n\tconst [input, setInput] = useState('');\n\tconst [customDict, setCustomDict] = useState('');\n\tconst [output, setOutput] = useState('');\n\tconst [copied, setCopied] = useState(false);\n\tconst history = useHistory();\n\tconst outputComp = useRef(null);\n\tconst inputComp = useRef(null);\n\n\tconst search = new URLSearchParams(location?.search ?? '');\n\tconst act = search.get('act') || 'decode';\n\tconst dict = decodeURI(search.get('dict') || '');\n\tconst txt = decodeURI(search.get('txt') || '');\n\n\tconst dictArr = useMemo(() => {\n\t\tlet d = customDict || dict;\n\t\tif (d) {\n\t\t\tif(/^(?:[^\\s,，]+[\\s,，]){2,}/[Symbol.match](d)) {\n\t\t\t\td = dict.split(/[\\s,，]/).map(e => e.trim());\n\t\t\t} else {\n\t\t\t\td = dict.split('').map(e => e.trim());\n\t\t\t}\n\t\t\treturn d;\n\t\t}\n\t}, [customDict, dict]);\n\n\tconst onClickEncode = useCallback(() => {\n\t\thistory.replace(location.pathname + '?act=encode' + (customDict ? `&dict=${encodeURI(customDict)}` : '') + (input ? `&txt=${encodeURI(input)}` : ''));\n\t}, [input, customDict, history, location]);\n\n\tconst onClickDecode = useCallback(() => {\n\t\thistory.replace(location.pathname + '?act=decode' + (customDict ? `&dict=${encodeURI(customDict)}` : '') + (input ? `&txt=${encodeURI(input)}` : ''));\n\t}, [input, customDict, history, location]);\n\n\tconst doEncode = useCallback(\n\t\t(txt, dict) => {\n\t\t\ttry {\n\t\t\t\tconst result = dict && dict.length > 2 ? encode(txt, dict) : encode(txt);\n\t\t\t\tsetOutput(result);\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t\tsetOutput('');\n\t\t\t}\n\t\t},\n\t\t[setOutput]\n\t);\n\n\tconst doDecode = useCallback(\n\t\t(txt, dict) => {\n\t\t\ttry {\n\t\t\t\tconst result = dict && dict.length > 2 ? decode(txt, dict) : decode(txt);\n\t\t\t\tsetOutput(result);\n\t\t\t} catch (ex) {\n\t\t\t\tsetOutput('');\n\t\t\t}\n\t\t},\n\t\t[setOutput]\n\t);\n\n\tuseEffect(() => {\n\t\tif (txt) {\n\t\t\tsetInput(txt);\n\t\t}\n\n\t\tif (dict) {\n\t\t\tsetCustomDict(dict);\n\t\t}\n\n\t\tif (act) {\n\t\t\tif (act === 'decode') {\n\t\t\t\tdoDecode(txt, dictArr);\n\t\t\t} else {\n\t\t\t\tdoEncode(txt, dictArr);\n\t\t\t}\n\t\t}\n\t}, [act, txt, dict]);\n\n\tconst onClickOutput = useCallback(() => {\n\t\toutputComp.current.select();\n\t\toutputComp.current.setSelectionRange(0, 999999);\n\t\tdocument.execCommand('copy');\n\t\tsetCopied(true);\n\n\t\tsetTimeout(() => setCopied(false), 700);\n\t}, [output, outputComp]);\n\n\tconst onFocusInput = useCallback(() => {\n\t\tinputComp.current.select();\n\t\tinputComp.current.setSelectionRange(0, 999999);\n\t}, [inputComp]);\n\n\treturn (\n\t\t<div className=\"HexieEncoder\">\n\t\t\t<h1>{$$`hexie-encoder`}</h1>\n\t\t\t<textarea\n\t\t\t\tonChange={({ target: { value } }) => {\n\t\t\t\t\tsetOutput('');\n\t\t\t\t\tsetInput(value);\n\t\t\t\t}}\n\t\t\t\tvalue={input}\n\t\t\t\tref={inputComp}\n\t\t\t\tonFocus={onFocusInput}\n\t\t\t></textarea>\n\t\t\t<div className=\"button-area\">\n\t\t\t\t<Button onClick={onClickEncode}>{$$`hexie.encode`}</Button>\n\t\t\t\t<Button onClick={onClickDecode}>{$$`hexie.decode`}</Button>\n\t\t\t</div>\n\t\t\t<textarea value={copied ? $$`hexie.copied` : output} readOnly={true} onClick={onClickOutput} ref={outputComp}></textarea>\n\t\t\t<h2>{$$`hexie.custom-dict`}</h2>\n\t\t\t<input\n\t\t\t\tclassName=\"custom-dict\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tplaceholder=\"富强 民主 文明 和谐 自由 平等 公正 法治 爱国 敬业 诚信 友善\"\n\t\t\t\tonChange={({ target: { value } }) => {\n\t\t\t\t\tsetOutput('');\n\t\t\t\t\tsetCustomDict(value);\n\t\t\t\t}}\n\t\t\t\tvalue={customDict}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default HexieEncoder;\n","import React, { useState } from 'react';\nimport { useTitle } from '../../../../hooks/misc';\nimport { ChromePicker } from 'react-color';\nimport { useMemo } from 'react';\nimport copy from 'copy-to-clipboard';\nimport { useCallback } from 'react';\nimport { toast } from 'react-toastify';\nimport $$ from 'whi18n';\n\nconst webColors = {\n\taliceblue: '#f0f8ff',\n\tantiquewhite: '#faebd7',\n\taqua: '#00ffff',\n\taquamarine: '#7fffd4',\n\tazure: '#f0ffff',\n\tbeige: '#f5f5dc',\n\tbisque: '#ffe4c4',\n\tblack: '#000000',\n\tblanchedalmond: '#ffebcd',\n\tblue: '#0000ff',\n\tblueviolet: '#8a2be2',\n\tbrown: '#a52a2a',\n\tburlywood: '#deb887',\n\tcadetblue: '#5f9ea0',\n\tchartreuse: '#7fff00',\n\tchocolate: '#d2691e',\n\tcoral: '#ff7f50',\n\tcornflowerblue: '#6495ed',\n\tcornsilk: '#fff8dc',\n\tcrimson: '#dc143c',\n\tcyan: '#00ffff',\n\tdarkblue: '#00008b',\n\tdarkcyan: '#008b8b',\n\tdarkgoldenrod: '#b8860b',\n\tdarkgray: '#a9a9a9',\n\tdarkgreen: '#006400',\n\t// darkgrey: '#a9a9a9',\n\tdarkkhaki: '#bdb76b',\n\tdarkmagenta: '#8b008b',\n\tdarkolivegreen: '#556b2f',\n\tdarkorange: '#ff8c00',\n\tdarkorchid: '#9932cc',\n\tdarkred: '#8b0000',\n\tdarksalmon: '#e9967a',\n\tdarkseagreen: '#8fbc8f',\n\tdarkslateblue: '#483d8b',\n\tdarkslategray: '#2f4f4f',\n\t// darkslategrey: '#2f4f4f',\n\tdarkturquoise: '#00ced1',\n\tdarkviolet: '#9400d3',\n\tdeeppink: '#ff1493',\n\tdeepskyblue: '#00bfff',\n\tdimgray: '#696969',\n\t// dimgrey: '#696969',\n\tdodgerblue: '#1e90ff',\n\tfirebrick: '#b22222',\n\tfloralwhite: '#fffaf0',\n\tforestgreen: '#228b22',\n\tfuchsia: '#ff00ff',\n\tgainsboro: '#dcdcdc',\n\tghostwhite: '#f8f8ff',\n\tgoldenrod: '#daa520',\n\tgold: '#ffd700',\n\tgray: '#808080',\n\tgreen: '#008000',\n\tgreenyellow: '#adff2f',\n\t// grey: '#808080',\n\thoneydew: '#f0fff0',\n\thotpink: '#ff69b4',\n\tindianred: '#cd5c5c',\n\tindigo: '#4b0082',\n\tivory: '#fffff0',\n\tkhaki: '#f0e68c',\n\tlavenderblush: '#fff0f5',\n\tlavender: '#e6e6fa',\n\tlawngreen: '#7cfc00',\n\tlemonchiffon: '#fffacd',\n\tlightblue: '#add8e6',\n\tlightcoral: '#f08080',\n\tlightcyan: '#e0ffff',\n\tlightgoldenrodyellow: '#fafad2',\n\tlightgray: '#d3d3d3',\n\tlightgreen: '#90ee90',\n\t// lightgrey: '#d3d3d3',\n\tlightpink: '#ffb6c1',\n\tlightsalmon: '#ffa07a',\n\tlightseagreen: '#20b2aa',\n\tlightskyblue: '#87cefa',\n\tlightslategray: '#778899',\n\t// lightslategrey: '#778899',\n\tlightsteelblue: '#b0c4de',\n\tlightyellow: '#ffffe0',\n\tlime: '#00ff00',\n\tlimegreen: '#32cd32',\n\tlinen: '#faf0e6',\n\tmagenta: '#ff00ff',\n\tmaroon: '#800000',\n\tmediumaquamarine: '#66cdaa',\n\tmediumblue: '#0000cd',\n\tmediumorchid: '#ba55d3',\n\tmediumpurple: '#9370db',\n\tmediumseagreen: '#3cb371',\n\tmediumslateblue: '#7b68ee',\n\tmediumspringgreen: '#00fa9a',\n\tmediumturquoise: '#48d1cc',\n\tmediumvioletred: '#c71585',\n\tmidnightblue: '#191970',\n\tmintcream: '#f5fffa',\n\tmistyrose: '#ffe4e1',\n\tmoccasin: '#ffe4b5',\n\tnavajowhite: '#ffdead',\n\tnavy: '#000080',\n\toldlace: '#fdf5e6',\n\tolive: '#808000',\n\tolivedrab: '#6b8e23',\n\torange: '#ffa500',\n\torangered: '#ff4500',\n\torchid: '#da70d6',\n\tpalegoldenrod: '#eee8aa',\n\tpalegreen: '#98fb98',\n\tpaleturquoise: '#afeeee',\n\tpalevioletred: '#db7093',\n\tpapayawhip: '#ffefd5',\n\tpeachpuff: '#ffdab9',\n\tperu: '#cd853f',\n\tpink: '#ffc0cb',\n\tplum: '#dda0dd',\n\tpowderblue: '#b0e0e6',\n\tpurple: '#800080',\n\trebeccapurple: '#663399',\n\tred: '#ff0000',\n\trosybrown: '#bc8f8f',\n\troyalblue: '#4169e1',\n\tsaddlebrown: '#8b4513',\n\tsalmon: '#fa8072',\n\tsandybrown: '#f4a460',\n\tseagreen: '#2e8b57',\n\tseashell: '#fff5ee',\n\tsienna: '#a0522d',\n\tsilver: '#c0c0c0',\n\tskyblue: '#87ceeb',\n\tslateblue: '#6a5acd',\n\tslategray: '#708090',\n\t// slategrey: '#708090',\n\tsnow: '#fffafa',\n\tspringgreen: '#00ff7f',\n\tsteelblue: '#4682b4',\n\ttan: '#d2b48c',\n\tteal: '#008080',\n\tthistle: '#d8bfd8',\n\ttomato: '#ff6347',\n\tturquoise: '#40e0d0',\n\tviolet: '#ee82ee',\n\twheat: '#f5deb3',\n\twhite: '#ffffff',\n\twhitesmoke: '#f5f5f5',\n\tyellow: '#ffff00',\n\tyellowgreen: '#9acd32'\n};\n\nconst getRGB = hex => {\n\tconst [_, r, g, b] = /([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/[Symbol.match](hex);\n\treturn [parseInt(r, 16) / 255, parseInt(g, 16) / 255, parseInt(b, 16) / 255];\n};\n\nconst webColorRGBs = Object.fromEntries(\n\tObject.entries(webColors).map(([key, value]) => {\n\t\tconst [r, g, b] = getRGB(value);\n\t\treturn [key, [r, g, b]];\n\t})\n);\n\nfunction rgbToHsl([r, g, b]) {\n\tlet max = Math.max(r, g, b),\n\t\tmin = Math.min(r, g, b);\n\tlet h,\n\t\ts,\n\t\tl = (max + min) / 2;\n\n\tif (max == min) {\n\t\th = s = 0; // achromatic\n\t} else {\n\t\tvar d = max - min;\n\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n\t\tswitch (max) {\n\t\t\tcase r:\n\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\tbreak;\n\t\t\tcase g:\n\t\t\t\th = (b - r) / d + 2;\n\t\t\t\tbreak;\n\t\t\tcase b:\n\t\t\t\th = (r - g) / d + 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\th /= 6;\n\t}\n\n\treturn [h, s, l];\n}\n\nfunction easeInOutCubic(x) {\n\treturn x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;\n}\n\nconst WebColorPicker = props => {\n\tuseTitle($$`_web-color-picker.title`);\n\tconst [color, setColor] = useState('#ff0000');\n\n\tconst brightness = useMemo(() => {\n\t\tconst [r, g, b] = getRGB(color);\n\t\treturn (0.299 * r ** 2 + 0.587 * g ** 2 + 0.114 * b ** 2) ** 0.5;\n\t}, [color]);\n\n\tconst webColors = useMemo(() => {\n\t\tlet mins = [\n\t\t\t{ dist: Infinity, color: 'N/A' },\n\t\t\t{ dist: Infinity, color: 'N/A' },\n\t\t\t{ dist: Infinity, color: 'N/A' }\n\t\t];\n\t\tconst [orgH, orgS, orgL] = rgbToHsl(getRGB(color));\n\t\tObject.entries(webColorRGBs).forEach(([key, [r, g, b]]) => {\n\t\t\tconst [h, s, l] = rgbToHsl([r, g, b]);\n\t\t\tlet distH = easeInOutCubic(Math.min(Math.abs(orgH - h), 1 - Math.abs(orgH - h)) * 2);\n\t\t\tlet distS = easeInOutCubic(Math.abs(orgS - s));\n\t\t\tlet distL = easeInOutCubic(Math.abs(orgL - l));\n\t\t\tdistS *= l ** 0.2;\n\t\t\tdistH *= s ** 0.2;\n\t\t\tdistL *= 0.5;\n\t\t\tconst dist = (distH + distS + distL) ** 0.5;\n\t\t\tfor (let i = 0; i < mins.length; i++) {\n\t\t\t\tlet min = mins[i];\n\t\t\t\tif (dist < min.dist) {\n\t\t\t\t\tfor (let j = mins.length - 1; j < i; j--) {\n\t\t\t\t\t\tmins[j] = mins[j - 1];\n\t\t\t\t\t}\n\t\t\t\t\tmins[i] = { dist, color: key };\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn mins.map(({ color }) => color);\n\t}, [color]);\n\n\tconst onClickColor = useCallback(color => {\n\t\tcopy(color);\n\t\ttoast($$`_web-color-picker.copied`);\n\t}, []);\n\n\treturn (\n\t\t<section className=\"WebColorPicker\">\n\t\t\t<h2>{$$`_web-color-picker.title`}</h2>\n\t\t\t<ChromePicker color={color} onChange={({ hex }) => setColor(hex)} disableAlpha={true} />\n\t\t\t<div className=\"comparison\">\n\t\t\t\t<div className=\"block origin\">\n\t\t\t\t\t<div className=\"color\" onClick={() => onClickColor(color)} style={{ backgroundColor: color, color: brightness > 0.5 ? 'black' : 'white' }}>\n\t\t\t\t\t\t<span style={{ opacity: 0.5 }}>{color}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"block web\">\n\t\t\t\t\t{webColors.map(color => (\n\t\t\t\t\t\t<div key={color} onClick={() => onClickColor(color)} className=\"color\" style={{ backgroundColor: color, color: brightness > 0.5 ? 'black' : 'white' }}>\n\t\t\t\t\t\t\t<span style={{ opacity: 0.5 }}>{color}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default WebColorPicker;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { useWords } from './hooks/regexDictionary';\nimport ContentEditable from 'react-contenteditable';\nimport useDebouncedEffect from 'use-debounced-effect';\nimport $$ from 'whi18n';\nimport { useCallback } from 'react';\nimport { toast } from 'react-toastify';\nimport copy from 'copy-to-clipboard';\nimport { useTitle } from '../../../../hooks/misc';\n\nconst RegexDictionary = props => {\n\tconst words = useWords();\n\tuseTitle($$`regex-dictionary`);\n\n\tconst [regex, setRegex] = useState('');\n\tconst [illegal, setIllegal] = useState(false);\n\tconst [overflow, setOverflow] = useState(false);\n\tconst regexRef = useRef('');\n\tconst [options, setOptions] = useState({ anchored: true });\n\tconst [filteredWords, setFilteredWords] = useState([]);\n\n\tuseDebouncedEffect(\n\t\t() => {\n\t\t\tif (!words.length || !regex) return;\n\n\t\t\ttry {\n\t\t\t\tconst regexStr = (options.anchored ? '^' : '') + regex + (options.anchored ? '$' : '');\n\t\t\t\tconst regexp = new RegExp(regexStr, 'i');\n\t\t\t\tconsole.log(regexp);\n\t\t\t\tlet count = 0;\n\t\t\t\tconst filtered = words.filter(e => {\n\t\t\t\t\tif (count >= 1000) {\n\t\t\t\t\t\tcount == 1000 && setOverflow(true);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = regexp.test(e);\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t\tsetFilteredWords(filtered);\n\t\t\t} catch (ex) {\n\t\t\t\tsetIllegal(true);\n\t\t\t}\n\t\t},\n\t\t1000,\n\t\t[regex, words, options]\n\t);\n\n\tconst copyWord = useCallback(word => {\n\t\tcopy(word);\n\t\ttoast($$`_regex-dictionary.copied`);\n\t});\n\n\treturn (\n\t\t<section className=\"RegexDictionary\">\n\t\t\t<h2>{$$`_regex-dictionary.title`}</h2>\n\t\t\t<div className={`input-area${options.anchored ? ' anchored' : ''}${illegal ? ' illegal' : ''}`}>\n\t\t\t\t<ContentEditable\n\t\t\t\t\thtml={regexRef.current}\n\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\tconsole.log(regexRef.current);\n\t\t\t\t\t}}\n\t\t\t\t\tonChange={({ target }) => {\n\t\t\t\t\t\tsetIllegal(false);\n\t\t\t\t\t\tregexRef.current = target.value;\n\t\t\t\t\t\tsetRegex(target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"options\">\n\t\t\t\t<div className=\"option-group\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"anchored\"\n\t\t\t\t\t\tname=\"anchored\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={options.anchored}\n\t\t\t\t\t\tonChange={({ target: { checked } }) => {\n\t\t\t\t\t\t\tconsole.log(checked);\n\t\t\t\t\t\t\tsetOptions({ ...options, anchored: !!checked });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"anchored\">{$$`_regex-dictionary.anchored`}</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"result\">\n\t\t\t\t{filteredWords.length ? (\n\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t{filteredWords.map(word => (\n\t\t\t\t\t\t\t<span onClick={() => copyWord(word)} key={word}>\n\t\t\t\t\t\t\t\t{word}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t) : illegal ? (\n\t\t\t\t\t<p>{$$`_regex-dictionary.illegal`}</p>\n\t\t\t\t) : (\n\t\t\t\t\t<p>{$$`_regex-dictionary.no-results`}</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default RegexDictionary;\n","import { useEffect } from \"react\";\nimport { setData, useData } from \"wherehouse\";\nimport http from \"../../../../../utils/http\"\nimport { RegexDictionary } from \"../../../../../utils/store\";\n\nexport const useWords = () => {\n\tconst words = useData(RegexDictionary.WORDS);\n\tuseEffect(() => {\n\t\tif(words.length) return;\n\t\thttp.get('/data/lab/words.txt').then(e => {\n\t\t\tsetData(RegexDictionary.WORDS, e.data.split(/\\n/));\n\t\t});\n\t}, [words])\n\treturn words;\n}","import React, { useState } from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\nimport { NavLink } from 'react-router-dom';\n// import LinearRegression from './laboratories/linearRegression/LinearRegression';\n// import TensorFlow from './laboratories/linearRegression/TensorFlow';\nimport Idioms from './laboratories/idioms/Idioms';\nimport HexieEncoder from './laboratories/hexie/HexieEncoder';\nimport WebColorPicker from './laboratories/web-color-picker/WebColorPicker';\nimport RegexDictionary from './laboratories/regex-dictionary/RegexDictionary';\nimport $$ from 'whi18n';\n\nconst Labs = props => {\n\treturn (\n\t\t<section className=\"Labs\">\n\t\t\t<div className=\"laboratories\">\n\t\t\t\t<div className=\"lab-navs\">\n\t\t\t\t\t{/* <NavLink to=\"/labs/tensorflow\">Tensor Flow</NavLink> */}\n\t\t\t\t\t{/* <NavLink to=\"/labs/linear-regression\">Linear Regression</NavLink> */}\n\t\t\t\t\t<NavLink to=\"/labs/hexie\">{$$`hexie-encoder`}</NavLink>\n\t\t\t\t\t<NavLink to=\"/labs/idioms\">{$$`idioms`}</NavLink>\n\t\t\t\t\t<NavLink to=\"/labs/web-color-picker\">{$$`web-color-picker`}</NavLink>\n\t\t\t\t\t<NavLink to=\"/labs/regex-dictionary\">{$$`regex-dictionary`}</NavLink>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"laboratory\">\n\t\t\t\t<Switch>\n\t\t\t\t\t{/* <Route path=\"/labs/tensorflow\" component={TensorFlow} /> */}\n\t\t\t\t\t{/* <Route path=\"/labs/linear-regression\" component={LinearRegression} /> */}\n\t\t\t\t\t<Route path=\"/labs/hexie\" component={HexieEncoder} />\n\t\t\t\t\t<Route path=\"/labs/idioms\" component={Idioms} />\n\t\t\t\t\t<Route path=\"/labs/web-color-picker\" component={WebColorPicker} />\n\t\t\t\t\t<Route path=\"/labs/regex-dictionary\" component={RegexDictionary} />\n\t\t\t\t\t<Redirect to=\"/labs/idioms\" />\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default Labs;\n","import React, { useState } from 'react';\n\nconst EmojiSprite = ({ children }) => {\n\treturn <span className=\"EmojiSprite\">{children}</span>;\n};\n\nexport default EmojiSprite;\n","import React, { useState } from 'react';\nimport { useData } from 'wherehouse';\nimport { EmojiSpin } from '../../../../../utils/store';\nimport EmojiSprite from './common/EmojiSprite';\n\nconst StatusBar = props => {\n\n\tconst coins = useData(EmojiSpin.COINS);\n\n\treturn (\n\t\t<section className=\"StatusBar\">\n\t\t\t<div className=\"coins\"><EmojiSprite>🪙</EmojiSprite> <span>{coins}</span></div>\n\t\t</section>\n\t);\n}\n\nexport default StatusBar;","import { useCallback, useEffect } from \"react\";\nimport { setData, useData } from \"wherehouse\";\nimport whevent from \"whevent\";\nimport { EmojiSpin } from \"../../../../utils/store\";\n\nexport const empty = {\n\tname: 'empty',\n\trarity: 0,\n\tvalue: 0\n};\n\nexport const symbols = [\n\t{\n\t\tname: 'smile',\n\t\temoji: '😀',\n\t\trarity: 0,\n\t\tvalue: 1,\n\t\taffect(result, source, target, score, boosters) {\n\t\t\t// console.log({ result, source, target, score, boosters });\n\t\t}\n\t},\n\t{\n\t\tname: 'mushroom',\n\t\temoji: '🍄',\n\t\trarity: 0,\n\t\tvalue: 1,\n\t},\n\t{\n\t\tname: 'coin',\n\t\temoji: '🪙',\n\t\trarity: 0,\n\t\tvalue: 1\n\t},\n\n\t{\n\t\tname: 'cat',\n\t\temoji: '🐱',\n\t\trarity: 0,\n\t\tvalue: 1\n\t},\n\n\t{\n\t\tname: 'cherry',\n\t\temoji: '🍒',\n\t\trarity: 0,\n\t\tvalue: 1,\n\t\tdesc: 'Give +1🪙 for every adjacent 🍒'\n\t}, {\n\t\tname: 'apple',\n\t\temoji: '🍎',\n\t\trarity: 0,\n\t\tvalue: 1,\n\t\tdesc: 'Give +1🪙 for every adjacent 🍎'\n\t}, {\n\t\tname: 'orange',\n\t\temoji: '🍊',\n\t\trarity: 1,\n\t\tvalue: 2\n\t}, {\n\t\tname: 'lemon',\n\t\temoji: '🍋',\n\t\trarity: 1,\n\t\tvalue: 3\n\t}, {\n\t\tname: 'watermelon',\n\t\temoji: '🍉',\n\t\trarity: 2,\n\t\tvalue: 5\n\t},\n];\n\nlet initiated = false;\nexport const useDeck = () => {\n\tconst deck = useData(EmojiSpin.DECK);\n\tconst result = useData(EmojiSpin.SPIN_RESULT);\n\n\tconst spin = useCallback((deck, cols = 5, rows = 5) => {\n\t\tconst shuffledDeck = [...deck];\n\t\tshuffledDeck.sort(() => Math.random() > 0.5 ? -1 : 1);\n\t\tif (shuffledDeck.length > cols * rows) {\n\t\t\tshuffledDeck.splice(cols * rows);\n\t\t} else {\n\t\t\tfor (let i = shuffledDeck.length; i < cols * rows; i++) {\n\t\t\t\tshuffledDeck.push(null);\n\t\t\t}\n\t\t\tshuffledDeck.sort(() => Math.random() > 0.5 ? -1 : 1);\n\t\t}\n\n\t\tconst columns = [];\n\n\t\tfor (let y = 0; y < cols; y++) {\n\t\t\tfor (let x = 0; x < rows; x++) {\n\t\t\t\tconst n = shuffledDeck[y * rows + x];\n\t\t\t\tif (x === 0) {\n\t\t\t\t\tcolumns[y] = {\n\t\t\t\t\t\tcolumn: y,\n\t\t\t\t\t\tslots: [\n\t\t\t\t\t\t\t{ column: y, row: x, slot: symbols.find(({ name }) => n === name) || empty }\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tcolumns[y].slots.push({ column: y, row: x, slot: symbols.find(({ name }) => n === name) || empty });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst result = {\n\t\t\tcols,\n\t\t\trows,\n\t\t\tcolumns,\n\t\t\ttoString() {\n\t\t\t\tconst rows = new Array(this.rows).fill('');\n\t\t\t\tthis.columns.forEach(({ slots }) => {\n\t\t\t\t\tslots.forEach(({ row, slot }) => {\n\t\t\t\t\t\trows[row] += (slot.emoji || 'X') + '\\t';\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn rows.join('\\n');\n\t\t\t}\n\t\t};\n\n\t\tconsole.log('%cRESULT', 'background-color: gold; color: #630; padding: 5px 10px; border-radius: 10px;', result);\n\t\tconsole.log(result.toString());\n\t\tsetData(EmojiSpin.SPIN_RESULT, result);\n\t\treturn result;\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!deck.length) {\n\t\t\tsetData(EmojiSpin.DECK, [\n\t\t\t\t'smile',\n\t\t\t\t'mushroom',\n\t\t\t\t'cherry',\n\t\t\t\t'cat',\n\t\t\t\t'coin',\n\t\t\t]);\n\t\t}\n\t}, [deck]);\n\n\tuseEffect(() => {\n\t\tif (!initiated && deck.length) {\n\t\t\tspin(deck);\n\t\t\tinitiated = true;\n\t\t}\n\t}, [spin, deck]);\n\n\treturn { deck, result, spin };\n};\n\nexport const calculateSlot = (result, target) => {\n\tconst { column, row, slot } = target;\n\tlet res = { base: 0, add: 0, mul: 1 };\n\tlet boosters = [];\n\n\tif (slot) {\n\t\tif (typeof slot.value === 'function') {\n\t\t\tslot.value(res);\n\t\t} else {\n\t\t\tres.base = slot.value || 0;\n\t\t}\n\t}\n\n\tfor (let c = 0; c < result.cols; c++) {\n\t\tfor (let r = 0; r < result.rows; r++) {\n\t\t\tif (c !== column || r !== row) {\n\t\t\t\tconst source = result.columns[c].slots[r];\n\t\t\t\tif (source.slot.affect) {\n\t\t\t\t\tsource.slot.affect(result, source, target, res, boosters);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst value = (res.base + res.add) * res.mul || 0;\n\treturn { value, boosters };\n};","import React, { useState } from 'react';\nimport EmojiSprite from './common/EmojiSprite';\n\nconst Slot = ({ slot, className }) => {\n\treturn (\n\t\t<section data-column={slot.column} data-row={slot.row} className={`Slot${className ? ' ' + className : ''}`}>\n\t\t\t<div className=\"slot-content\">{slot && slot.slot ? <EmojiSprite>{slot.slot.emoji}</EmojiSprite> : <span className=\"empty\"></span>}</div>\n\t\t</section>\n\t);\n};\n\nexport default Slot;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport Slot from './Cell';\nimport whevent from 'whevent';\nimport { setData, useData } from 'wherehouse';\nimport { EmojiSpin } from '../../../../../utils/store';\n\nlet shouldDelay = false;\nconst Column = ({ column }) => {\n\tconst [bias, setBias] = useState(0);\n\tconst [spinning, setSpinning] = useState(false);\n\tconst [stored, setStored] = useState(column);\n\tconst [cols] = useData(EmojiSpin.DIMENTIONS);\n\n\tconst onSpin = useCallback(() => {\n\t\tshouldDelay = true;\n\t\tlet phase = 0;\n\t\tconst ease = t => (t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1);\n\t\tconst step = () => {\n\t\t\tphase += 0.02;\n\t\t\tlet bias = ease(phase) * 1000;\n\t\t\tsetBias(bias);\n\t\t\tif (phase < 1) {\n\t\t\t\trequestAnimationFrame(step);\n\t\t\t} else {\n\t\t\t\tif (column.column === cols - 1) {\n\t\t\t\t\twhevent.emit('DONE_SPIN');\n\t\t\t\t}\n\t\t\t\tsetBias(0);\n\t\t\t\tsetSpinning(false);\n\t\t\t}\n\t\t};\n\n\t\tsetTimeout(() => {\n\t\t\tsetSpinning(true);\n\t\t\tstep();\n\t\t}, column.column * 50);\n\t}, []);\n\n\tuseEffect(() => {\n\t\twhevent.on('SPIN', onSpin);\n\n\t\treturn () => whevent.off('SPIN', onSpin);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!shouldDelay) {\n\t\t\tsetStored(column);\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetStored(column);\n\t\t\t}, 500 + column.column * 50);\n\t\t}\n\t}, [column]);\n\n\treturn (\n\t\t<section data-column={column.column} className={'Column' + (spinning ? ' spinning' : '')}>\n\t\t\t<div className=\"column-wrapper\" style={{ '--bias': bias % 100 }}>\n\t\t\t\t<div className=\"slots fake\">\n\t\t\t\t\t{stored.slots.map(slot => (\n\t\t\t\t\t\t<Slot key={`slot_${slot.column}_${slot.row}`} slot={slot} />\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"slots real\">\n\t\t\t\t\t{stored.slots.map(slot => (\n\t\t\t\t\t\t<Slot data-column={slot.column} data-row={slot.column} key={`slot_${slot.column}_${slot.row}`} slot={slot} />\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n\t\t\t\t<defs>\n\t\t\t\t\t<filter id=\"blur\">\n\t\t\t\t\t\t<feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0,8\" />\n\t\t\t\t\t</filter>\n\t\t\t\t</defs>\n\t\t\t</svg>\n\t\t</section>\n\t);\n};\n\nexport default Column;\n","import React, { useMemo, useState } from 'react';\nimport { symbols } from '../core';\nimport Column from './Column';\n\nconst SlotArea = ({ result }) => {\n\treturn (\n\t\t<section className=\"SlotArea\">\n\t\t\t{result.columns.map(column => (\n\t\t\t\t<Column key={`column_${column.column}`} column={column} />\n\t\t\t))}\n\t\t</section>\n\t);\n};\n\nexport default SlotArea;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport whevent from 'whevent';\n\nconst VFXArea = props => {\n\tconst scoresRef = useRef(null);\n\tconst onCalcScore = useCallback(\n\t\t({ column, row, slot }, value) => {\n\t\t\tconsole.log({ column, row, slot }, value);\n\t\t\tconst cell = document.querySelector(`.slots.real .Slot[data-column='${column}'][data-row='${row}']`);\n\t\t\tconst [x, y] = (() => {\n\t\t\t\tconst { x: ax, y: ay, width, height } = cell.getBoundingClientRect();\n\t\t\t\tconst { x: dx, y: dy } = scoresRef.current.getBoundingClientRect();\n\t\t\t\tconst x = ax - dx + width / 2;\n\t\t\t\tconst y = ay - dy + height / 2;\n\t\t\t\treturn [x, y];\n\t\t\t})();\n\t\t\tconst scoreDiv = document.createElement('span');\n\t\t\tscoreDiv.classList.add('score');\n\t\t\tscoreDiv.innerText = value;\n\t\t\tscoreDiv.style.top = `${y}px`;\n\t\t\tscoreDiv.style.left = `${x}px`;\n\t\t\tscoresRef.current.appendChild(scoreDiv);\n\t\t},\n\t\t[scoresRef]\n\t);\n\n\tuseEffect(() => {\n\t\twhevent.on('CALC_SCORE', onCalcScore);\n\t\treturn () => whevent.off('CALC_SCORE', onCalcScore);\n\t});\n\n\treturn (\n\t\t<section className=\"VFXArea\">\n\t\t\t<div class=\"scores\" ref={scoresRef}></div>\n\t\t</section>\n\t);\n};\n\nexport default VFXArea;\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport SlotArea from '../components/SlotArea';\nimport VFXArea from '../components/VFXArea';\nimport { calculateSlot, useDeck } from '../core';\nimport whevent from 'whevent';\n\nimport Button from '../../../../../components/common/Button';\nimport { getData, setData, useData } from 'wherehouse';\nimport { EmojiSpin } from '../../../../../utils/store';\n\nconst wait = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst SlotScreen = props => {\n\tconst { deck, spin: getResult, result } = useDeck();\n\tconst [cols, rows] = useData(EmojiSpin.DIMENTIONS);\n\tconst state = useData(EmojiSpin.STATE);\n\n\tconst onFinishSpin = useCallback(async () => {\n\t\tsetData(EmojiSpin.STATE, 'CALCULATING');\n\t\tconst result = getData(EmojiSpin.SPIN_RESULT);\n\n\t\tfor (let row = 0; row < result.rows; row++) {\n\t\t\tfor (let col = 0; col < result.cols; col++) {\n\t\t\t\tconst target = result.columns[col].slots[row];\n\t\t\t\tconst { value, boosters } = await calculateSlot(result, target);\n\n\t\t\t\tif (boosters.length > 0) {\n\t\t\t\t\twhevent.emit('BOOSTERS', target, boosters);\n\t\t\t\t\tawait wait(300);\n\t\t\t\t}\n\n\t\t\t\tif (value) {\n\t\t\t\t\twhevent.emit('CALC_SCORE', target, value);\n\t\t\t\t\tsetData(EmojiSpin.COINS, val => val + value);\n\t\t\t\t\tawait wait(300);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsetData(EmojiSpin.STATE, 'IDLE');\n\t}, []);\n\n\tconst spin = useCallback(() => {\n\t\tsetData(EmojiSpin.STATE, 'SPINNING');\n\t\twhevent.emit('SPIN', getResult(deck, cols, rows));\n\t}, [deck, getResult]);\n\n\tuseEffect(() => {\n\t\twhevent.on('DONE_SPIN', onFinishSpin);\n\t\treturn () => whevent.off('DONE_SPIN', onFinishSpin);\n\t}, []);\n\n\treturn (\n\t\t<section className=\"screen GameScreen\">\n\t\t\t<div className=\"top-area\">\n\t\t\t\t<SlotArea result={result} />\n\t\t\t\t<VFXArea />\n\t\t\t</div>\n\t\t\t<div className=\"bottom-area\">\n\t\t\t\t<Button onClick={spin} disabled={state !== 'IDLE'}>\n\t\t\t\t\tSpin\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default SlotScreen;\n","import React, { useState } from 'react';\nimport StatusBar from './components/StatusBar';\nimport SlotScreen from './screens/SlotScreen';\n\nconst EmojiSpin = props => {\n\t\n\n\treturn (\n\t\t<section className=\"EmojiSpin\">\n\t\t\t<StatusBar />\n\t\t\t<div className=\"screens\">\n\t\t\t\t<SlotScreen />\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default EmojiSpin;\n","import React, { useState } from 'react';\nimport EmojiSpin from './games/emojiSpin/EmojiSpin';\nimport { Redirect, Route, Switch } from 'react-router';\nimport { NavLink } from 'react-router-dom';\nimport $$ from 'whi18n';\n\nconst Games = props => {\n\treturn (\n\t\t<section className=\"Games\">\n\t\t\t<div className=\"games\">\n\t\t\t\t<div className=\"game-navs\">\n\t\t\t\t\t<NavLink to=\"/games/emoji-spin\">{$$`_games.emoji-spin`}</NavLink>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"game\">\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/games/emoji-spin\" component={EmojiSpin} />\n\t\t\t\t\t<Redirect to=\"/games/emoji-spin\" />\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default Games;\n","import http from \"../../../utils/http\";\n\nconst blogs = [\n\t{ id: 1, title: 'Test Blog', date: '2020-05-13', desc: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Nobis magnam aperiam sequi at alias animi possimus sunt labore dolorem, debitis quis facilis architecto voluptatum repellat maiores blanditiis suscipit quo maxime temporibus id. Quis fugit labore inventore? Illum nobis veniam doloremque aut pariatur, dolor quis minima voluptatum sit deleniti fuga a nostrum amet numquam. Ad, repellendus delectus. Aspernatur eaque praesentium quia excepturi vel aliquid pariatur expedita iste voluptatibus odio accusamus commodi provident, deserunt numquam nulla alias, culpa, minima ea atque consectetur.', file: '/blogs/TestBlog.md', tags: ['测试'] },\n\t{ id: 2, title: '博客开张大吉', date: '2020-05-14', desc: '日服第一切图仔的博客上线了', file: '/blogs/HelloWorld.md', tags: ['测试', '摸鱼'] },\n];\n\nexport const getBlogList = async () => {\n\treturn await blogs;\n};\n\nexport const getBlog = async id => {\n\tconst file = blogs.find(({ id: _id }) => _id == id)?.file;\n\tif (file) {\n\t\tconst blog = await http.get(file);\n\t\treturn blog.data ?? '';\n\t}\n\treturn '';\n}\n\nexport default {\n\tgetBlog,\n\tgetBlogList\n}","import React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useBlog } from '../hooks/blog';\nimport Markdown from '../../../components/common/Markdown';\n\nconst Article = props => {\n\tconst { id } = useParams();\n\tconst blog = useBlog(id);\n\n\treturn (\n\t\t<section className=\"Article\">\n\t\t\t<Markdown>{blog}</Markdown>\n\t\t</section>\n\t);\n};\n\nexport default Article;\n","import { useEffect, useState } from \"react\";\nimport { setData, useData } from \"wherehouse\";\nimport { Blog } from '../../../utils/store';\nimport { getBlog, getBlogList } from \"../services/blog\";\n\n\nexport const useBlogList = () => {\n\tconst blogs = useData(Blog.BLOGS);\n\n\tuseEffect(() => {\n\t\tif (!blogs?.length) {\n\t\t\t(async () => {\n\t\t\t\tsetData(Blog.BLOGS, (await getBlogList())?.reverse());\n\t\t\t})();\n\t\t}\n\t}, [blogs]);\n\n\treturn blogs;\n};\n\nexport const useBlog = id => {\n\tconst [blog, setBlog] = useState('');\n\n\tuseEffect(() => {\n\t\t(async () => setBlog(await getBlog(id)))();\n\t}, [id]);\n\n\treturn blog;\n}","import React, { useState } from 'react';\nimport { useBlogList } from '../hooks/blog';\nimport { Link } from 'react-router-dom';\nimport $$ from 'whi18n';\n\nconst BlogList = props => {\n\tconst blogs = useBlogList();\n\n\treturn (\n\t\t<section className=\"BlogList\">\n\t\t\t<h1>{$$`_blog.blogs`}</h1>\n\t\t\t<ul className=\"list\" data-empty={$$`_blog.empty`}>\n\t\t\t\t{blogs.map(({ id, title, date, desc, tags }) => (\n\t\t\t\t\t<li className=\"entry\" key={`blog_${id}`}>\n\t\t\t\t\t\t<Link to={`/blog/${id}`}>\n\t\t\t\t\t\t\t<h2>{title}</h2>\n\t\t\t\t\t\t\t<p>{desc}</p>\n\t\t\t\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t\t\t\t<time>{date}</time>\n\t\t\t\t\t\t\t\t<ul className=\"tags\">\n\t\t\t\t\t\t\t\t\t{tags?.map(tag => (\n\t\t\t\t\t\t\t\t\t\t<li key={tag}>{tag}</li>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</section>\n\t);\n};\n\nexport default BlogList;\n","import React, { useState } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Article from './Article';\nimport BlogList from './BlogList';\n\nconst Blog = props => {\n\treturn (\n\t\t<section className=\"Blog\">\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/blog/:id\" component={Article} />\n\t\t\t\t<Route path=\"/blog/\" component={BlogList} exact />\n\t\t\t</Switch>\n\t\t</section>\n\t);\n};\n\nexport default Blog;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { useCallback } from 'react';\n\nconst Particle = ({ startingX, startingY, blur, moveDirection, spinDirection, moveDuration, spinDuration, timing, size }) => {\n\tconst containeStyle = useMemo(\n\t\t() => ({\n\t\t\tanimationDirection: moveDirection > 0 ? 'initial' : 'reverse',\n\t\t\tanimationDuration: moveDuration + 's',\n\t\t\tanimationDelay: timing * -1 + 's',\n\t\t\ttop: startingY * 100 + '%',\n\t\t\t'--size': size + 'rem'\n\t\t}),\n\t\t[]\n\t);\n\n\tconst particleStyle = useMemo(\n\t\t() => ({\n\t\t\tanimationDirection: spinDirection > 0 ? 'initial' : 'reverse',\n\t\t\tanimationDuration: spinDuration + 's',\n\t\t\tleft: startingX * 100 + '%',\n\t\t\twidth: size + 'rem',\n\t\t\theight: size + 'rem',\n\t\t\tfilter: `blur(${1 + blur * 3}px)`\n\t\t}),\n\t\t[]\n\t);\n\n\treturn (\n\t\t<div className=\"particle-container\" style={containeStyle}>\n\t\t\t<div className=\"particle\" style={particleStyle}></div>\n\t\t</div>\n\t);\n};\n\nconst Background = props => {\n\tconst particles = useMemo(\n\t\t() => [\n\t\t\t...(function* () {\n\t\t\t\tfor (let i = 0; i < 16; i++) {\n\t\t\t\t\tconst startingX = Math.random();\n\t\t\t\t\tconst startingY = Math.random();\n\t\t\t\t\tconst moveDirection = Math.random() > 0.5 ? -1 : 1;\n\t\t\t\t\tconst spinDirection = Math.random() > 0.5 ? -1 : 1;\n\t\t\t\t\tconst moveDuration = 50 + Math.random() * 300;\n\t\t\t\t\tconst spinDuration = 50 + Math.random() * 300;\n\t\t\t\t\tconst timing = Math.random() * moveDuration;\n\t\t\t\t\tconst blur = Math.random();\n\t\t\t\t\tconst size = 10 + blur * 25;\n\n\t\t\t\t\tyield <Particle {...{ startingX, startingY, blur, moveDirection, spinDirection, moveDuration, spinDuration, timing, size }} />;\n\t\t\t\t}\n\t\t\t})()\n\t\t],\n\t\t[]\n\t);\n\n\tconst [ratio, setRatio] = useState(0);\n\n\tconst onScroll = useCallback(({ target: { scrollHeight, clientHeight, scrollTop } }) => {\n\t\tconst percentage = scrollTop / (scrollHeight - clientHeight);\n\t\tsetRatio(percentage);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tdocument.querySelector('main').addEventListener('scroll', onScroll);\n\t\treturn () => {\n\t\t\tdocument.querySelector('main').removeEventListener('scroll', onScroll);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<section className=\"Background\" style={{ '--ratio': ratio }}>\n\t\t\t{particles}\n\t\t</section>\n\t);\n};\n\nexport default Background;\n","import React, { useState } from 'react';\nimport $$ from 'whi18n';\n\nconst Timeline = ({ data }) => {\n\treturn (\n\t\t<section className=\"Timeline\">\n\t\t\t<div className=\"entries\">\n\t\t\t\t{data.map(({ time, icon, content, institution, url, title }, i) => (\n\t\t\t\t\t<div key={`${time}_${i}`} className=\"entry\">\n\t\t\t\t\t\t<div className=\"line\">\n\t\t\t\t\t\t\t<i className={`icon-${icon}`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<time>{time}</time>\n\t\t\t\t\t\t\t<div className=\"position-area\">\n\t\t\t\t\t\t\t\t<span className=\"position\">{title}</span>\n\t\t\t\t\t\t\t\t<span className=\"at\">@</span>\n\t\t\t\t\t\t\t\t{url && url.startsWith('http') ? (\n\t\t\t\t\t\t\t\t\t<a href={url} target=\"blank\" className=\"institution\">\n\t\t\t\t\t\t\t\t\t\t{institution}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<a href=\"javascript: void(0)\" className=\"institution\">{institution}</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"content\" dangerouslySetInnerHTML={{ __html: content }}></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default Timeline;\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { getData, setData, useData } from 'wherehouse';\nimport { CV as CV_VIEW, FULLSCREEN, IS_CV, LANG } from '../../utils/store';\nimport $$ from 'whi18n';\nimport { useTitle } from '../../hooks/misc';\nimport Background from './components/Background';\nimport Timeline from './components/Timeline';\nimport { useRef } from 'react';\nimport { LANGUAGES as AVAILABLE_LANGUAGES } from '../../utils/store';\n\nconst Stars = ({ value }) => {\n\treturn (\n\t\t<section className=\"Stars\">\n\t\t\t{[\n\t\t\t\t...(function* () {\n\t\t\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\t\t\tyield <i key={`star_${i}`} className={value <= i * 2 ? 'icon-star-empty' : value == i * 2 + 1 ? 'icon-star-half' : 'icon-star-full'} />;\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]}\n\t\t</section>\n\t);\n};\n\nconst PROGRAMMING_LANGUAGES = () => [\n\t{ name: 'JavaScript', value: 10 },\n\t{ name: 'CSS', value: 10 },\n\t{ name: $$`_cv.regex`, value: 10 },\n\t{ name: 'HTML', value: 9 },\n\t{ name: 'TypeScript', value: 7 },\n\t{ name: 'Java', value: 6 },\n\t{ name: 'C#', value: 6 },\n\t{ name: 'PHP', value: 5 },\n\t{ name: 'Python', value: 5 }\n];\n\nconst SKILL_TECHNEQUES = () => [\n\t{ name: 'Vue', value: 9 },\n\t{ name: 'React', value: 9 },\n\t{ name: $$`_cv.ui-ux-animation`, value: 9 },\n\t{ name: 'Node.js', value: 8 },\n\t{ name: 'Git', value: 8 },\n\t// { name: 'Cocos Creator', value: 7 },\n\t{ name: 'Linux', value: 7 }\n\t// { name: 'Photoshop', value: 7 }\n];\n\nconst LANGUAGES = [\n\t{ name: '中文', value: 10 },\n\t{ name: 'English', value: 9 },\n\t{ name: '日本語', value: 6 }\n];\n\nconst TIMELINE = () => [\n\t...(function* () {\n\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\tyield {\n\t\t\t\ttime: $$`_cv._timeline.exp${i}.date`,\n\t\t\t\ticon: $$`_cv._timeline.exp${i}.icon`,\n\t\t\t\tcontent: $$`_cv._timeline.exp${i}.content`,\n\t\t\t\tinstitution: $$`_cv._timeline.exp${i}.institution`,\n\t\t\t\turl: $$`_cv._timeline.exp${i}.url`,\n\t\t\t\ttitle: $$`_cv._timeline.exp${i}.title`,\n\t\t\t};\n\t\t}\n\t})()\n];\n\nconst CV = ({ location }) => {\n\tconst { pic, name, kata, title, email, phone, github, codepen, stackoverflow, linkedin, itchio, homepage } = useMemo(() => {\n\t\tconst keys = ['pic', 'name', 'kata', 'title', 'email', 'phone', 'github', 'codepen', 'stackoverflow', 'linkedin', 'itchio', 'homepage'];\n\t\treturn keys.reduce((acc, key) => ({ ...acc, [key]: $$`_cv.profile.${key}` }), {});\n\t}, []);\n\t\n\n\tuseTitle(name);\n\tuseEffect(() => {\n\t\tsetData(CV_VIEW, true);\n\t\tsetData(IS_CV, true);\n\t\tsetData(AVAILABLE_LANGUAGES, ['en-US', 'zh-CN', 'ja-JP']);\n\t\twindow.localStorage.setItem('cv', '1');\n\n\t\treturn () => {\n\t\t\tsetData(AVAILABLE_LANGUAGES, ['en-US', 'zh-CN']);\n\t\t\tsetData(IS_CV, false);\n\t\t};\n\t}, []);\n\tuseEffect(() => {\n\t\tconst search = new URLSearchParams(location.search);\n\t\tif (search.get('fullscreen')) {\n\t\t\tsetData(FULLSCREEN, true);\n\t\t}\n\n\t\treturn () => setData(FULLSCREEN, false);\n\t}, [location]);\n\n\tconst lang = useData(LANG);\n\tconst myName = useRef(null);\n\n\treturn (\n\t\t<section className=\"CV\">\n\t\t\t<div className=\"left-panel\">\n\t\t\t\t<div className=\"section profile\">\n\t\t\t\t\t<img data-role=\"pic\" src={pic} alt={name} />\n\t\t\t\t\t<div data-role=\"details\">\n\t\t\t\t\t\t<p data-role=\"name\">\n\t\t\t\t\t\t\t{lang === 'ja-JP' && kata && <span className=\"kata\">{kata}</span>}\n\t\t\t\t\t\t\t<span ref={myName} className=\"name\">{name}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p data-role=\"title\">{title}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section contact\">\n\t\t\t\t\t<h2 className=\"title\">{$$`_cv.contact`}</h2>\n\t\t\t\t\t<ul className=\"list\" data-role=\"contact-list\">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"mailto:acphun@gmail.com\">\n\t\t\t\t\t\t\t\t<i className=\"icon-envelope\"></i>\n\t\t\t\t\t\t\t\t<span>{email}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"javascript: void(0)\">\n\t\t\t\t\t\t\t\t<i className=\"icon-phone\"></i>\n\t\t\t\t\t\t\t\t<span>{phone}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://github.com/wheatup\">\n\t\t\t\t\t\t\t\t<i className=\"icon-github\"></i>\n\t\t\t\t\t\t\t\t<span>{github}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://codepen.io/wheatup\">\n\t\t\t\t\t\t\t\t<i className=\"icon-codepen\"></i>\n\t\t\t\t\t\t\t\t<span>{codepen}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://stackoverflow.com/users/10289265/hao-wu\">\n\t\t\t\t\t\t\t\t<i className=\"icon-stackoverflow\"></i>\n\t\t\t\t\t\t\t\t<span>{stackoverflow}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://wheatup.itch.io/\">\n\t\t\t\t\t\t\t\t<i className=\"icon-itchio-textless-white\"></i>\n\t\t\t\t\t\t\t\t<span>{itchio}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://www.linkedin.com/in/hao-wu-55037b170/\">\n\t\t\t\t\t\t\t\t<i className=\"icon-linkedin\"></i>\n\t\t\t\t\t\t\t\t<span>{linkedin}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://wheatup.github.io\">\n\t\t\t\t\t\t\t\t<i className=\"icon-home\"></i>\n\t\t\t\t\t\t\t\t<span>{homepage}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section programming-language\">\n\t\t\t\t\t<h2 className=\"title\">{$$`_cv.programming-language`}</h2>\n\t\t\t\t\t<ul className=\"list skill-list\" data-role=\"programming-language\">\n\t\t\t\t\t\t{PROGRAMMING_LANGUAGES().map(({ name, value }) => (\n\t\t\t\t\t\t\t<li key={name}>\n\t\t\t\t\t\t\t\t<label>{name}</label>\n\t\t\t\t\t\t\t\t<Stars value={value} />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section skills\">\n\t\t\t\t\t<h2 className=\"title\">{$$`_cv.skill-techniques`}</h2>\n\t\t\t\t\t<ul className=\"list skill-list\" data-role=\"skill-techniques\">\n\t\t\t\t\t\t{SKILL_TECHNEQUES().map(({ name, value }) => (\n\t\t\t\t\t\t\t<li key={name}>\n\t\t\t\t\t\t\t\t<label>{name}</label>\n\t\t\t\t\t\t\t\t<Stars value={value} />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section languages\">\n\t\t\t\t\t<h2 className=\"title\">{$$`_cv.languages`}</h2>\n\t\t\t\t\t<ul className=\"list skill-list\" data-role=\"languages\">\n\t\t\t\t\t\t{LANGUAGES.map(({ name, value }) => (\n\t\t\t\t\t\t\t<li key={name}>\n\t\t\t\t\t\t\t\t<label>{name}</label>\n\t\t\t\t\t\t\t\t<Stars value={value} />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"right-panel\">\n\t\t\t\t<div className=\"section about-me\">\n\t\t\t\t\t<h2 className=\"title\">\n\t\t\t\t\t\t<i className=\"icon-profile\"></i>\n\t\t\t\t\t\t<span>{$$`_cv.about-me`}</span>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<p>{$$`_cv._about-me`}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section timeline\">\n\t\t\t\t\t<h2 className=\"title\">\n\t\t\t\t\t\t<i className=\"icon-stats-dots\"></i>\n\t\t\t\t\t\t<span>{$$`_cv.timeline`}</span>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<Timeline data={TIMELINE()} />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"section achievement\">\n\t\t\t\t\t<h2 className=\"title\">\n\t\t\t\t\t\t<i className=\"icon-trophy\"></i>\n\t\t\t\t\t\t<span>{$$`_cv.achievement`}</span>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div className=\"content\" dangerouslySetInnerHTML={{__html: $$`_cv._achievement`}}></div>\n\t\t\t\t</div>\n\n\t\t\t\t<Background />\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default CV;\n","import React, { useEffect, useState } from 'react';\nimport { init } from 'whi18n';\nimport { setData, useData } from 'wherehouse';\nimport http from '../utils/http';\nimport { LANG } from '../utils/store';\n\nconst GlobalRouteHandler = ({ location }) => {\n\tconst lang = useData(LANG);\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst search = new URLSearchParams(location.search);\n\t\t\tlet newLang = search.get('lang');\n\n\t\t\tif (newLang && newLang !== lang) {\n\t\t\t\tsetData(LANG, newLang);\n\t\t\t\tawait init(newLang, async lang => (await http.get(`/i18n/${newLang}.json`)).data);\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t})();\n\t}, [location, lang]);\n\n\treturn null;\n};\n\nexport default GlobalRouteHandler;\n","import React, { useCallback, useEffect, useMemo } from 'react';\nimport {\n\tBrowserRouter as Router,\n\tSwitch,\n\tRoute,\n\tNavLink,\n\tRedirect\n} from \"react-router-dom\";\nimport Home from './projects/home/Home';\nimport { useMaxHeight } from './hooks/misc';\nimport Forum from './projects/forum/components/Forum';\nimport User from './components/common/User';\nimport LanguageSwitcher from './components/LanguageSwitcher';\nimport $$ from 'whi18n';\nimport Labs from './projects/labs/Labs';\nimport Games from './projects/games/Games';\nimport Blog from './projects/blog/components/Blog';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { setData, useData } from 'wherehouse';\nimport { CV as ViewCV, FULLSCREEN, IS_CV, LANG } from './utils/store';\nimport CV from './projects/cv/CV';\nimport GlobalRouteHandler from './components/GlobalRouteHandler';\nimport Button from './components/common/Button';\n// import html2canvas from 'html2canvas';\n\nconst App = () => {\n\tuseMaxHeight();\n\tconst cv = useData(ViewCV);\n\tconst isCV = useData(IS_CV);\n\tconst fullscreen = useData(FULLSCREEN);\n\tuseEffect(() => {\n\t\tconst search = new URLSearchParams(window.location.search);\n\t\tif (search.get('lang')) {\n\t\t\tconst lang = search.get('lang');\n\t\t\twindow.localStorage.setItem('lang', lang);\n\t\t\tsearch.delete('lang');\n\t\t\tif (!search.get('redirect')) {\n\t\t\t\tconst url = window.location.href.replace(/lang=[\\w-]+&?/g, '').replace(/\\?$/g, '');\n\t\t\t\twindow.location.href = url;\n\t\t\t}\n\t\t}\n\t\tif (search.get('redirect')) {\n\t\t\tlet url = `/${search.get('redirect')}`;\n\t\t\tif ([...search.entries()].length > 1) {\n\t\t\t\turl += `?${[...search.entries()].filter(([key]) => ['redirect', 'lang'].includes(key)).map(e => e.join('=')).join('&')}`;\n\t\t\t}\n\t\t\twindow.location.href = url;\n\t\t}\n\t}, []);\n\n\t// const onClickDownloadAsPDF = useCallback(() => {\n\t// \thtml2canvas(document.querySelector('.CV'), {\n\t// \t\twindowWidth: 3508,\n\t// \t\twindowHeight: 2480\n\t// \t}).then(function (canvas) {\n\t// \t\tvar a = document.createElement('a');\n\t// \t\t// toDataURL defaults to png, so we need to request a jpeg, then convert for file download.\n\t// \t\ta.href = canvas.toDataURL(\"image/jpeg\").replace(\"image/jpeg\", \"image/octet-stream\");\n\t// \t\ta.download = 'CV_HAOWU.jpg';\n\t// \t\ta.click();\n\t// \t\ta.remove();\n\t// \t});\n\t// }, []);\n\n\treturn (\n\t\t<Router path={process.env.PUBLIC_URL + '/'}>\n\t\t\t<div className=\"App\">\n\t\t\t\t{!fullscreen &&\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<div className=\"nav\">\n\t\t\t\t\t\t\t<NavLink exact to=\"/\" className=\"logo pc-only\"></NavLink>\n\t\t\t\t\t\t\t<div className=\"nav-links\">\n\t\t\t\t\t\t\t\t<NavLink exact to=\"/\" title={$$`home`}><i className=\"icon-home\"></i></NavLink>\n\t\t\t\t\t\t\t\t<NavLink to=\"/blog\" title={$$`blog`}><i className=\"icon-pencil\"></i></NavLink>\n\t\t\t\t\t\t\t\t<NavLink to=\"/forum\" title={$$`forum`}><i className=\"icon-forum\"></i></NavLink>\n\t\t\t\t\t\t\t\t<NavLink to=\"/labs\" title={$$`labs`}><i className=\"icon-lab\"></i></NavLink>\n\t\t\t\t\t\t\t\t{cv && <NavLink to=\"/cv\" title={$$`cv`}><i className=\"icon-profile\"></i></NavLink>}\n\t\t\t\t\t\t\t\t{/* <NavLink to=\"/games\" title={$$`games`}><i className=\"icon-pacman\"></i></NavLink> */}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isCV && <a target=\"_blank\" href=\"/data/CV_HAOWU.pdf\" download><i className=\"icon-arrow-down\" style={{fontSize: '2rem'}}></i><span style={{marginLeft: '0.5rem'}} className=\"pc-only\">{$$`download`}</span></a>}\n\t\t\t\t\t\t\t{/* {isCV && <Button onClick={onClickDownloadAsPDF}>{$$`download`}</Button>} */}\n\t\t\t\t\t\t\t<LanguageSwitcher />\n\t\t\t\t\t\t\t<User />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\t\t\t\t}\n\t\t\t\t<main>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/forum\" component={Forum} />\n\t\t\t\t\t\t<Route path=\"/blog\" component={Blog} />\n\t\t\t\t\t\t<Redirect path=\"/hexie\" to=\"/labs/hexie\" />\n\t\t\t\t\t\t<Redirect path=\"/idioms\" to=\"/labs/idioms\" />\n\t\t\t\t\t\t<Route path=\"/labs\" component={Labs} />\n\t\t\t\t\t\t<Route path=\"/games\" component={Games} />\n\t\t\t\t\t\t<Route path=\"/cv\" component={CV} />\n\t\t\t\t\t\t<Route path=\"/\" component={Home} exact />\n\t\t\t\t\t</Switch>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route component={GlobalRouteHandler} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</main>\n\t\t\t\t{!fullscreen &&\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t&copy;&nbsp;<a href=\"https://github.com/wheatup/\" target=\"_blank\" rel=\"noopener noreferrer\">wheatup</a>&nbsp;<a target=\"_blank\" href=\"https://github.com/wheatup/wheatup.github.io/blob/master/LICENSE\">@{new Date().getFullYear()} {$$`all-rights-reserved`}</a>\n\t\t\t\t\t</footer>\n\t\t\t\t}\n\t\t\t\t<ToastContainer hideProgressBar closeOnClick autoClose={3000} />\n\t\t\t</div>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './scss/style.scss';\nimport { setup as initStore } from './utils/store';\nimport { init as initI18n } from 'whi18n';\nimport http from \"./utils/http\";\n\n(async () => {\n\tinitStore();\n\tawait initI18n(window.localStorage.getItem('lang') || ({ en: 'en-US', 'en-BR': 'en-US', 'zh-CN': 'zh-CN', 'zh-TW': 'zh-CN' })[navigator.language] || 'en-US', async lang => (await http.get(`/i18n/${lang}.json`)).data);\n\n\tReactDOM.render(\n\t\t<React.StrictMode>\n\t\t\t<App />\n\t\t</React.StrictMode>,\n\t\tdocument.getElementById('root')\n\t);\n\tserviceWorker.unregister();\n})();"],"sourceRoot":""}